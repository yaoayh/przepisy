if (self.CavalryLogger) { CavalryLogger.start_js(["TWKLv"]); }

__d("BandicootSession",[],(function(a,b,c,d,e,f){"use strict";var g=Object.freeze({ACTIVE:"ACTIVE",INACTIVE:"INACTIVE",CLOSED:"CLOSED"}),h=10*60*1e3,i=14*24*60*60*1e3;function j(a){return Date.now()-a.lastUpdated}function a(a){return!!(typeof a==="object"&&a&&a.lastUpdated&&a.status)}function b(a){if(a.status===g.CLOSED)return!1;else if(a.status===g.INACTIVE&&j(a)>h)return!1;return!0}function c(a){return a.status===g.ACTIVE&&j(a)>h}function d(a){return j(a)>i}e.exports={Status:g,isValidSession:a,isTrackedSession:b,isOrphanSession:d,isCrashedSession:c}}),null);
__d("Bandicoot",["invariant","BandicootSession","FBLogger"],(function(a,b,c,d,e,f,g){"use strict";var h=5*1e3,i=h*2,j="Bandicoot:",k=(c=b("BandicootSession")).Status,l=c.isValidSession,m=c.isTrackedSession,n=c.isCrashedSession,o=c.isOrphanSession;function a(){try{var a=window.localStorage;if(a){var c="__test"+Date.now();a.setItem(c,"");a.removeItem(c)}return a}catch(a){b("FBLogger")("bandicoot").warn("Local storage is full");return null}}var p=a();d=function(){function a(a){this.$5=j+a,this.$4={},this.$1=this.$7.bind(this),this.sessionID=null,this.sessionStartTime=null,this.storage=p}var c=a.prototype;c.getCrashTimeData=function(){var a=window.performance&&window.performance.memory||{},b=this.sessionStartTime;return{duration:b?Date.now()-b:0,tabs:Object.keys(this.$8()).length,jsHeapSizeLimit:a.jsHeapSizeLimit,totalJSHeapSize:a.totalJSHeapSize,usedJSHeapSize:a.usedJSHeapSize,elementsInDOM:document.getElementsByTagName("*").length,uri:window.location.href}};c.getLogTimeData=function(){return{userAgent:window.navigator.userAgent}};c.logCrash=function(a,c,d){b("FBLogger")("bandicoot").warn("Session %s crashed at %s",a,d)};c.logBrowserUnsupported=function(){b("FBLogger")("bandicoot").warn("Browser not supported")};c.logTrackingError=function(){b("FBLogger")("bandicoot").warn("Failed to record data for current session")};c.startSession=function(){var a=this;if(!this.storage){this.logBrowserUnsupported();return}if(this.$2)return;this.sessionID||(this.sessionID=Math.random().toString(36).slice(2,9));this.sessionStartTime||(this.sessionStartTime=Date.now());this.$2=setInterval(function(){a.$9()},h);this.$9();document.addEventListener&&document.addEventListener("visibilitychange",this.$1);this.$10()};c.endSession=function(){if(!this.storage)return;if(!this.$2)return;clearInterval(this.$2);this.$2=null;this.$3||this.$11({status:k.CLOSED});this.sessionID=null;this.sessionStartTime=null;document.removeEventListener&&document.removeEventListener("visibilitychange",this.$1)};c.logKnownCrashes=function(){var a=this;if(!this.storage)return;if(!this.$2){var b=this.$8();b=this.$12(b,function(b,c){if(n(b)){a.logCrash(c,b,a.getLogTimeData());return null}else return b});this.$13(b)}};c.$14=function(){var a=this.sessionID;a||g(0,663);return a};c.$9=function(){var a=this.$8();this.$15(a);a=this.$16(a);this.$13(a)};c.$15=function(a){var b=this.$14(),c=a[b]?a[b]:{};a[b]=babelHelpers["extends"]({},c,this.getCrashTimeData(),{lastUpdated:Date.now(),status:this.$17()})};c.$12=function(a,b){var c={};Object.keys(a).forEach(function(d){var e=a[d];if(l(e)&&m(e)&&!o(e)){e=b(e,d);e&&(c[d]=e)}});return c};c.$16=function(a){var b=this;return this.$12(a,function(a,c){if(n(a)){var d=a.loggerReportTime||0;if(Date.now()-d>i)a.loggerReportTime=Date.now(),a.loggerReportSession=b.$14();else if(a.loggerReportSession==b.$14()){b.logCrash(c,a,b.getLogTimeData());b.$4[c]=!0;return null}}return a})};c.$8=function(a){a=a||this.$5;var c=this.storage.getItem(a)||"{}";try{c=JSON.parse(c)}catch(d){c={},this.storage.removeItem(a),b("FBLogger")("bandicoot").catching(d).warn("Invalid JSON data")}return c};c.$11=function(a){a.lastUpdated=Date.now();var b=this.$8(),c=this.sessionID;c&&b[c]&&(Object.assign(b[c],a),this.$13(b))};c.$13=function(a){a=JSON.stringify(a);try{this.storage.setItem(this.$5,a)}catch(d){a=this.$6;var c=Date.now();(!a||c>a+h)&&(this.logTrackingError(),this.$6=c);try{this.storage.removeItem(this.$5)}catch(a){this.$3=!0,this.endSession(),b("FBLogger")("bandicoot").catching(a).warn("Removing from storage failed")}}};c.$10=function(){for(var a=0;a<this.storage.length;++a){var b=this.storage.key(a);if(b.indexOf(j)===0&&b!==this.$5){var c=this.$8(b),d=Object.keys(c).every(function(a){a=c[a];return!l(a)||o(a)});d&&this.storage.removeItem(b)}}};c.$7=function(){this.$11({status:this.$17()})};c.$17=function(){return document.hidden?k.INACTIVE:k.ACTIVE};return a}();e.exports=d}),null);
__d("DOMControl",["DataStore","$"],(function(a,b,c,d,e,f){a=function(){"use strict";function a(a){this.root=b("$").fromIDOrElement(a),this.updating=!1,b("DataStore").set(a,"DOMControl",this)}var c=a.prototype;c.getRoot=function(){return this.root};c.beginUpdate=function(){if(this.updating)return!1;this.updating=!0;return!0};c.endUpdate=function(){this.updating=!1};c.update=function(a){if(!this.beginUpdate())return this;this.onupdate(a);this.endUpdate()};c.onupdate=function(a){};a.getInstance=function(a){return b("DataStore").get(a,"DOMControl")};return a}();e.exports=a}),null);
__d("Input",["CSS","DOMControl","DOMQuery"],(function(a,b,c,d,e,f){var g={isWhiteSpaceOnly:function(a){return!/\S/.test(a||"")},isEmpty:function(a){return g.isWhiteSpaceOnly(a.value)},getValue:function(a){return g.isEmpty(a)?"":a.value},getValueRaw:function(a){return a.value},setValue:function(a,c){a.value=c||"";c=b("DOMControl").getInstance(a);c&&c.resetHeight&&c.resetHeight()},setPlaceholder:function(a,b){b||(b=""),a.setAttribute("aria-label",b),a.setAttribute("placeholder",b)},reset:function(a){a.value="",a.style.height=""},setSubmitOnEnter:function(a,c){b("CSS").conditionClass(a,"enter_submit",c)},getSubmitOnEnter:function(a){return b("CSS").hasClass(a,"enter_submit")},setMaxLength:function(a,b){b>0?a.setAttribute("maxlength",b.toString()):a.removeAttribute("maxlength")}};e.exports=g}),null);
__d("Form",["DataStore","DOM","DOMQuery","DTSG","DTSGUtils","Input","LSD","PHPQuerySerializer","Random","SprinkleConfig","URI","getElementPosition","isFacebookURI","isNode"],(function(a,b,c,d,e,f){var g,h,i="FileList"in window,j="FormData"in window;function k(a){var c={};(g||(g=b("PHPQuerySerializer"))).serialize(a).split("&").forEach(function(a){if(a){a=/^([^=]*)(?:=(.*))?$/.exec(a);var d=(h||(h=b("URI"))).decodeComponent(a[1]),e=a[2]!==void 0;e=e?(h||(h=b("URI"))).decodeComponent(a[2]):null;c[d]=e}});return c}var l={getInputs:function(a){a===void 0&&(a=document);return[].concat(b("DOMQuery").scry(a,"input"),b("DOMQuery").scry(a,"select"),b("DOMQuery").scry(a,"textarea"),b("DOMQuery").scry(a,"button"))},getInputsByName:function(a){var b={};l.getInputs(a).forEach(function(a){var c=b[a.name];b[a.name]=typeof c==="undefined"?a:[a].concat(c)});return b},getSelectValue:function(a){return a.options[a.selectedIndex].value},setSelectValue:function(a,b){for(var c=0;c<a.options.length;++c)if(a.options[c].value==b){a.selectedIndex=c;break}},getRadioValue:function(a){for(var b=0;b<a.length;b++)if(a[b].checked)return a[b].value;return null},getElements:function(a){return a.tagName=="FORM"&&a.elements!=a?Array.from(a.elements):l.getInputs(a)},getAttribute:function(a,b){return(a.getAttributeNode(b)||{}).value||null},setDisabled:function(a,c){l.getElements(a).forEach(function(a){if(a.disabled!==void 0){var d=b("DataStore").get(a,"origDisabledState");c?(d===void 0&&b("DataStore").set(a,"origDisabledState",a.disabled),a.disabled=c):d===!1&&(a.disabled=!1)}})},forEachValue:function(a,c,d){l.getElements(a).forEach(function(a){if(!a.name||a.disabled)return;if(a.type==="submit")return;if(a.type==="reset"||a.type==="button"||a.type==="image")return;if((a.type==="radio"||a.type==="checkbox")&&!a.checked)return;if(a.nodeName==="SELECT"){for(var c=0,e=a.options.length;c<e;c++){var f=a.options[c];f.selected&&d("select",a.name,f.value)}return}if(a.type==="file"){if(i){f=a.files;for(var c=0;c<f.length;c++)d("file",a.name,f.item(c))}return}d(a.type,a.name,b("Input").getValue(a))}),c&&c.name&&c.type==="submit"&&b("DOMQuery").contains(a,c)&&b("DOMQuery").isNodeOfType(c,["input","button"])&&d("submit",c.name,c.value)},createFormData:function(a,c){if(!j)return null;var d=new FormData();if(a)if(b("isNode")(a))l.forEachValue(a,c,function(b,a,c){d.append(a,c)});else{c=k(a);for(var e in c)c[e]==null?d.append(e,""):d.append(e,c[e])}return d},serialize:function(a,b){var c={};l.forEachValue(a,b,function(a,b,d){if(a==="file")return;l._serializeHelper(c,b,d)});return l._serializeFix(c)},_serializeHelper:function(a,b,c){var d=Object.prototype.hasOwnProperty,e=/([^\]]+)\[([^\]]*)\](.*)/.exec(b);if(e){if(!a[e[1]]||!d.call(a,e[1])){a[e[1]]=d={};if(a[e[1]]!==d)return}d=0;if(e[2]==="")while(a[e[1]][d]!==void 0)d++;else d=e[2];e[3]===""?a[e[1]][d]=c:l._serializeHelper(a[e[1]],d.concat(e[3]),c)}else a[b]=c},_serializeFix:function(a){for(var b in a)a[b]instanceof Object&&(a[b]=l._serializeFix(a[b]));var c=Object.keys(a);if(c.length===0||c.some(isNaN))return a;c.sort(function(a,b){return a-b});var d=0,e=c.every(function(a){return+a===d++});return e?c.map(function(b){return a[b]}):a},post:function(a,c,d,e){e===void 0&&(e=!0);a=new(h||(h=b("URI")))(a);var f=document.createElement("form");f.action=a.toString();f.method="POST";f.style.display="none";var g=!b("isFacebookURI")(a);if(d){if(g){f.rel="noopener";if(d==="_blank"){d=btoa(b("Random").uint32());var i=window.open("about:blank",d);i===void 0||(i.opener=null)}}f.target=d}if(e&&(!g&&a.getSubdomain()!=="apps")){i=b("DTSG").getToken();i&&(c.fb_dtsg=i,b("SprinkleConfig").param_name&&(c[b("SprinkleConfig").param_name]=b("DTSGUtils").getNumericValue(i)));b("LSD").token&&(c.lsd=b("LSD").token,b("SprinkleConfig").param_name&&!i&&(c[b("SprinkleConfig").param_name]=b("DTSGUtils").getNumericValue(b("LSD").token)))}l.createHiddenInputs(c,f);b("DOMQuery").getRootElement().appendChild(f);f.submit();return!1},createHiddenInputs:function(a,c,d,e){e===void 0&&(e=!1);d=d||{};a=k(a);for(var f in a){if(a[f]===null)continue;if(d[f]&&e)d[f].value=a[f];else{var g=b("DOM").create("input",{type:"hidden",name:f,value:a[f]});d[f]=g;c.appendChild(g)}}return d},getFirstElement:function(a,c){c===void 0&&(c=['input[type="text"]',"textarea",'input[type="password"]','input[type="button"]','input[type="submit"]']);var d=[];for(var e=0;e<c.length;e++){d=b("DOMQuery").scry(a,c[e]);for(var f=0;f<d.length;f++){var g=d[f];try{var h=b("getElementPosition")(g);if(h.y>0&&h.x>0)return g}catch(a){}}}return null},focusFirst:function(a){a=l.getFirstElement(a);if(a){a.focus();return!0}return!1}};e.exports=l}),null);
__d("AsyncUploadBase",["ArbiterMixin","AsyncRequest","AsyncResponse","BrowserSupport","Form","forEachObject","mixin","removeFromArray"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);c.parseFiles=function(a){var c={};b("forEachObject")(a,function(a,b){if(Array.isArray(a))c[b]=a;else{c[b]=[];if(a instanceof window.FileList)for(var d=0;d<a.length;d++)c[b].push(a.item(d));else(a instanceof window.File||a instanceof window.Blob)&&c[b].push(a)}});return c};function c(b){var c;c=a.call(this)||this;c._allowCrossOrigin=!1;c._allowCrossPageTransition=!1;c._customHeader={};c._inFlight=!1;c._limit=10;c._option={};c._preventDefaultErrorHandler=!1;c._suspended=!1;b&&c.setURI(b);c.setNetworkErrorRetryLimit(0);return c}var d=c.prototype;d.setAllowCrossOrigin=function(a){this._allowCrossOrigin=!!a;return this};d.setAllowCrossPageTransition=function(a){this._allowCrossPageTransition=!!a;return this};d.setCustomHttpHeader=function(a,b){this._customHeader[a]=b;return this};d.setData=function(a){this._data=a;return this};d.setOption=function(a,b){this._option[a]=b;return this};d.setPreventDefaultErrorHandler=function(a){this._preventDefaultErrorHandler=a;return this};d.setLimit=function(a){this._limit=a;return this};d.setNetworkErrorRetryLimit=function(a){this._retryLimit=a;return this};d.setPreprocessHandler=function(a){this._preprocessHandler=a;return this};d.setRelativeTo=function(a){this._relativeTo=a;return this};d.setStatusElement=function(a){this._statusElement=a;return this};d.setURI=function(a){this._uri=a;return this};d.suspend=function(){this._suspended=!0;return this};d.resume=function(){this._suspended=!1;this._processQueue();return this};d.isUploading=function(){return this._inFlight};d._createFileUpload=function(a,b,c){return new g(a,b,c)};d._processQueue=function(){if(this._suspended)return;while(this._pending.length<this._limit){if(!this._waiting.length)break;var a=this._waiting.shift(),b=this._preprocessHandler;b?b(a,this._processUpload.bind(this)):this._processUpload(a);this._pending.push(a)}};d._processUpload=function(a){var c=b("Form").createFormData(a.getData()||this._data);if(a.getFile()){c.append(a.getName(),a.getFile());var d=a.getFile().uploadID;d&&c.append("upload_id",d);a.getAdditionalData().forEach(function(a,b){return c.append(b,a)})}d=new(b("AsyncRequest"))().setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setURI(this._uri).setRawData(c).setStatusElement(this._statusElement).setHandler(this._success.bind(this,a)).setErrorHandler(this._failure.bind(this,a)).setUploadProgressHandler(this._progress.bind(this,a)).setInitialHandler(this._initial.bind(this,a));for(var e in this._option)d.setOption(e,this._option[e]);for(var f in this._customHeader)d.setRequestHeader(f,this._customHeader[f]);this._relativeTo&&d.setRelativeTo(this._relativeTo);d.send();a.setAsyncRequest(d);this._inFlight=!0;a.getRetryCount()||this.inform("start",a)};d._abort=function(a){this._pending.indexOf(a)!==-1&&(b("removeFromArray")(this._pending,a),this._processQueue()),b("removeFromArray")(this._waiting,a),a.abort()};d._initial=function(a){if(a.isAborted())return;this.inform("initial",a)};d._success=function(a,b){if(a.isAborted()){this.inform("success_after_abort",b);return}this._complete(a);this.inform("success",a.handleSuccess(b));this._processQueue()};d._retryUpload=function(a){a.increaseRetryCount(),this._processUpload(a)};d._failure=function(a,c){if(a.isAborted())return;if(c.error===1004&&a.getRetryCount()<(this._retryLimit||0))return this._retryUpload(a);this._complete(a);this.inform("failure",a.handleFailure(c))!==!1&&(this._preventDefaultErrorHandler||b("AsyncResponse").defaultErrorHandler(c));this._processQueue()};d._progress=function(a,b){if(a.isAborted())return;this.inform("progress",a.handleProgress(b))};d._complete=function(a){b("removeFromArray")(this._pending,a),this._pending.length||(this._inFlight=!1)};c.isSupported=function(){return b("BrowserSupport").hasFileAPI()};return c}(b("mixin")(b("ArbiterMixin")));var g=function(){"use strict";function a(a,b,c){this._additionalData=new Map(),this._success=null,this._response=null,this._progressEvent=null,this._request=null,this._numRetries=0,this._aborted=!1,this._name=a,this._file=b,this._data=c}var b=a.prototype;b.getName=function(){return this._name};b.getFile=function(){return this._file};b.setFile=function(a){this._file=a};b.getData=function(){return this._data};b.getAdditionalData=function(){return this._additionalData};b.isComplete=function(){return this._success!==null};b.isSuccess=function(){return this._success===!0};b.getResponse=function(){return this._response};b.getProgressEvent=function(){return this._progressEvent};b.setAsyncRequest=function(a){this._request=a;return this};b.increaseRetryCount=function(){this._numRetries++;return this};b.getRetryCount=function(){return this._numRetries};b.isWaiting=function(){return!this._request};b.isAborted=function(){return this._aborted};b.abort=function(){this._request=null,this._aborted=!0};b.handleSuccess=function(a){this._success=!0;this._response=a;this._progressEvent=null;return this};b.handleFailure=function(a){this._success=!1;this._response=a;this._progressEvent=null;return this};b.handleProgress=function(a){this._progressEvent=a;return this};return a}();e.exports=a}),null);
__d("AsyncUploadRequest",["AsyncUploadBase"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c._files=null,c._uploads=[],c._fileLessUpload=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.setFiles=function(a){this._files=b("AsyncUploadBase").parseFiles(a);return this};d.setAlwaysReturnResponse=function(a){this._shouldAlwaysReturnResponse=a};d.abort=function(){var a=this;this._uploads.forEach(function(b){return a._abort(b)},this)};d.send=function(){if(this._inFlight)return;this._inFlight=!0;this._uploads=[];for(var a in this._files)this._files[a].forEach(function(b){this._uploads.push(this._createFileUpload(a,b))}.bind(this));this._waiting=this._uploads.slice(0);this._pending=[];this._uploads.length?this._processQueue():(this._fileLessUpload=this._createFileUpload(null,null),this._processUpload(this._fileLessUpload))};d._processQueue=function(){a.prototype._processQueue.call(this);if(!this._pending.length&&!this._waiting.length){var b=this._uploads;b=this._shouldAlwaysReturnResponse?this._fileLessUpload!=null?{response:this._fileLessUpload.getResponse(),uploads:b}:{response:b[0].getResponse(),uploads:b}:b;this.inform("complete",b)}};c.isSupported=function(){return b("AsyncUploadBase").isSupported()};return c}(b("AsyncUploadBase"));e.exports=a}),null);
__d("shield",[],(function(a,b,c,d,e,f){function a(a,b){for(var c=arguments.length,d=new Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];if(typeof a!=="function")throw new TypeError("shield expects a function as the first argument");return function(){return a.apply(b,d)}}e.exports=a}),null);
__d("FileInputUploader",["ArbiterMixin","DOM","DTSG","FileForm","Form","mixin"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this)||this;c._inputElem=b;c._data={};return c}var d=c.prototype;d.setInput=function(a){this._inputElem=a;return this};d.setURI=function(a){this._uri=a;return this};d.setData=function(a){this._data=a;return this};d.setPreprocessHandler=function(a){this._preprocessHandler=a;return this};d.setNetworkErrorRetryLimit=function(a){this._retryLimit=a;return this};d.setFiles=function(a){this._files=a;return this};d.setAllowCrossOrigin=function(a){this._allowCrossOrigin=!!a;return this};d.setAllowCrossPageTransition=function(a){this._allowCrossPageTransition=!!a;return this};d.setUploadInParallel=function(a){this._uploadInParallel=!!a;return this};d.setConcurrentLimit=function(a){this._concurrentLimit=a;return this};d.abort=function(){this._fileForm&&(this._fileForm.abort(),this._destroyFileForm())};d.send=function(){this._createForm();var a=this._inputElem&&!this._inputElem.parentElement;if(!a&&this._inputElem){var c=this._inputElem.cloneNode(!1);b("DOM").replace(this._inputElem,c)}this._inputElem&&b("DOM").appendContent(this._formElem,this._inputElem);b("DOM").appendContent(document.body,this._formElem);this._fileForm.submit();!a&&this._inputElem&&b("DOM").replace(c,this._inputElem);this._removeFormEl()};d._onFileFormEvent=function(a,b){(a==="success"||a==="failure")&&this._destroyFileForm();return this.inform(a,b)};d._createForm=function(){var a;this._destroyFileForm();this._formElem=b("DOM").create("form",{action:this._uri,method:"post"});this._fileForm=new(b("FileForm"))(this._formElem,null,{allowCrossOrigin:!!this._allowCrossOrigin,allowCrossPageTransition:!!this._allowCrossPageTransition,uploadInParallel:!!this._uploadInParallel,concurrentLimit:(a=this._concurrentLimit)!=null?a:0,preprocessHandler:(a=this._preprocessHandler)!=null?a:null,networkErrorRetryLimit:(a=this._retryLimit)!=null?a:0});this._files&&this._fileForm.setFiles(this._files);this._fileForm.subscribe(b("FileForm").EVENTS,this._onFileFormEvent.bind(this));b("Form").createHiddenInputs(babelHelpers["extends"]({fb_dtsg:b("DTSG").getToken()},this._data),this._formElem)};d._removeFormEl=function(){b("DOM").remove(this._formElem),this._formElem=null};d._destroyFileForm=function(){this._fileForm&&(this._fileForm.destroy(),this._fileForm=null)};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("curry",["bind"],(function(a,b,c,d,e,f){a=b("bind")(null,b("bind"),null);e.exports=a}),null);
__d("ManagedError",[],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(b,c){var d;d=a.call(this,b!==null&&b!==void 0?b:"")||this;b!==null&&b!==void 0?d.message=b:d.message="";d.innerError=c;return d}return b}(babelHelpers.wrapNativeSuper(Error));e.exports=a}),null);
__d("AssertionError",["ManagedError"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(b){return a.call(this,b)||this}return b}(b("ManagedError"));e.exports=a}),null);
__d("Assert",["AssertionError","sprintf"],(function(a,b,c,d,e,f){function g(a,c){if(typeof a!=="boolean"||!a)throw new(b("AssertionError"))(c);return a}function h(a,c,d){var e;if(c===void 0)e="undefined";else if(c===null)e="null";else{var f=Object.prototype.toString.call(c);e=/\s(\w*)/.exec(f)[1].toLowerCase()}g(a.indexOf(e)!==-1,d||b("sprintf")("Expression is of type %s, not %s",e,a));return c}function a(a,b,c){g(b instanceof a,c||"Expression not instance of type");return b}function i(a,b){j["is"+a]=b,j["maybe"+a]=function(a,c){a!=null&&b(a,c)}}var j={isInstanceOf:a,isTrue:g,isTruthy:function(a,b){return g(!!a,b)},type:h,define:function(a,b){a=a.substring(0,1).toUpperCase()+a.substring(1).toLowerCase(),i(a,function(a,c){g(b(a),c)})}};["Array","Boolean","Date","Function","Null","Number","Object","Regexp","String","Undefined"].forEach(function(a){i(a,h.bind(null,a.toLowerCase()))});e.exports=j}),null);
__d("SpectrumWasm",["Promise","bx"],(function(a,b,c,d,e,f){var g=b("bx").getURL(b("bx")("1061903")),h=function(){var c=typeof document!=="undefined"&&document.currentScript?document.currentScript.src:void 0;return function(d){d=d||{};var f=typeof d!=="undefined"?d:{},i={},j;for(j in f)Object.prototype.hasOwnProperty.call(f,j)&&(i[j]=f[j]);f.arguments=[];f.thisProgram="./this.program";f.quit=function(a,b){throw b};f.preRun=[];f.postRun=[];var k=!0,l=!1,m="";(k||l)&&(l?m=self.location.href:document.currentScript&&(m=document.currentScript.src),c&&(m=c),m.indexOf("blob:")!==0?m=m.substr(0,m.lastIndexOf("/")+1):m="",f.read=function(a){var b=new XMLHttpRequest();b.open("GET",a,!1);b.send(null);return b.responseText},l&&(f.readBinary=function(a){var b=new XMLHttpRequest();b.open("GET",a,!1);b.responseType="arraybuffer";b.send(null);return new Uint8Array(b.response)}),f.readAsync=function(a,b,c){var d=new XMLHttpRequest();d.open("GET",a,!0);d.responseType="arraybuffer";d.onload=function(){if(d.status==200||d.status==0&&d.response){b(d.response);return}c()};d.onerror=c;d.send(null)},f.setWindowTitle=function(a){document.title=a});var n=f.print||(typeof console!=="undefined"?emptyFunction.bind(console):typeof print!=="undefined"?print:null),o=f.printErr||(typeof printErr!=="undefined"?printErr:typeof console!=="undefined"&&emptyFunction.bind(console)||n);for(j in i)Object.prototype.hasOwnProperty.call(i,j)&&(f[j]=i[j]);i=void 0;function aa(a){var b=B[C>>2];a=b+a+15&-16;a>xb()&&$();B[C>>2]=a;return b}function p(a){switch(a){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:if(a[a.length-1]==="*")return 4;else if(a[0]==="i"){var b=parseInt(a.substr(1));t(b%8===0,"getNativeTypeSize invalid bits "+b+", type "+a);return b/8}else return 0}}var ba={"f64-rem":function(a,b){return a%b},"debugger":function(){debugger}};new Array(0);var ca=0,q=function(a){ca=a};m=function(){return ca};typeof WebAssembly!=="object"&&o("no native wasm support detected");function p(a,b,c,d){c=c||"i8";c.charAt(c.length-1)==="*"&&(c="i32");switch(c){case"i1":z[a>>0]=b;break;case"i8":z[a>>0]=b;break;case"i16":ra[a>>1]=b;break;case"i32":B[a>>2]=b;break;case"i64":I=[b>>>0,(p=b,+Ia(p)>=1?p>0?(La(+Ka(p/4294967296),4294967295)|0)>>>0:~~+Ja((p-+(~~p>>>0))/4294967296)>>>0:0)],B[a>>2]=I[0],B[a+4>>2]=I[1];break;case"float":sa[a>>2]=b;break;case"double":ta[a>>3]=b;break;default:$("invalid type for setValue: "+c)}}var r,s=!1;function t(a,b){a||$("Assertion failed: "+b)}function da(a){var b=f["_"+a];t(b,"Cannot call unknown function "+a+", make sure it is exported");return b}function ea(a,b,c,d,e){var f={string:function(a){var b=0;if(a!==null&&a!==void 0&&a!==0){var c=(a.length<<2)+1;b=yc(c);ia(a,b,c)}return b},array:function(a){var b=yc(a.length);ka(a,b);return b}};function e(a){if(b==="string")return v(a);return b==="boolean"?Boolean(a):a}a=da(a);var g=[],h=0;if(d)for(var i=0;i<d.length;i++){var j=f[c[i]];j?(h===0&&(h=Z()),g[i]=j(d[i])):g[i]=d[i]}j=a.apply(null,g);j=e(j);h!==0&&Y(h);return j}function fa(a,b,c,d){c=c||[];var e=c.every(function(a){return a==="number"}),f=b!=="string";return f&&e&&!d?da(a):function(){return ea(a,b,c,arguments,d)}}j=3;function ga(a){return!Aa?aa(a):xc(a)}var ha=typeof TextDecoder!=="undefined"?new TextDecoder("utf8"):void 0;function u(a,b,c){c=b+c;var d=b;while(a[d]&&!(d>=c))++d;if(d-b>16&&a.subarray&&ha)return ha.decode(a.subarray(b,d));else{c="";while(b<d){var e=a[b++];if(!(e&128)){c+=String.fromCharCode(e);continue}var f=a[b++]&63;if((e&224)==192){c+=String.fromCharCode((e&31)<<6|f);continue}var g=a[b++]&63;(e&240)==224?e=(e&15)<<12|f<<6|g:e=(e&7)<<18|f<<12|g<<6|a[b++]&63;if(e<65536)c+=String.fromCharCode(e);else{f=e-65536;c+=String.fromCharCode(55296|f>>10,56320|f&1023)}}}return c}function v(a,b){return a?u(A,a,b):""}function w(a,b,c,d){if(!(d>0))return 0;var e=c;d=c+d-1;for(var f=0;f<a.length;++f){var g=a.charCodeAt(f);if(g>=55296&&g<=57343){var h=a.charCodeAt(++f);g=65536+((g&1023)<<10)|h&1023}if(g<=127){if(c>=d)break;b[c++]=g}else if(g<=2047){if(c+1>=d)break;b[c++]=192|g>>6;b[c++]=128|g&63}else if(g<=65535){if(c+2>=d)break;b[c++]=224|g>>12;b[c++]=128|g>>6&63;b[c++]=128|g&63}else{if(c+3>=d)break;b[c++]=240|g>>18;b[c++]=128|g>>12&63;b[c++]=128|g>>6&63;b[c++]=128|g&63}}b[c]=0;return c-e}function ia(a,b,c){return w(a,A,b,c)}function x(a){var b=0;for(var c=0;c<a.length;++c){var d=a.charCodeAt(c);d>=55296&&d<=57343&&(d=65536+((d&1023)<<10)|a.charCodeAt(++c)&1023);d<=127?++b:d<=2047?b+=2:d<=65535?b+=3:b+=4}return b}typeof TextDecoder!=="undefined"?new TextDecoder("utf-16le"):void 0;function ja(a){var b=x(a)+1,c=xc(b);c&&w(a,z,c,b);return c}function ka(b,a){z.set(b,a)}function la(b,a,c){for(var d=0;d<b.length;++d)z[a++>>0]=b.charCodeAt(d);c||(z[a>>0]=0)}function ma(a){return a}function na(a){var b=/__Z[\w\d_]+/g;return a.replace(b,function(a){var b=ma(a);return a===b?a:b+" ["+a+"]"})}function oa(){var a=new Error();if(!a.stack){try{throw new Error(0)}catch(b){a=b}if(!a.stack)return"(no stack trace available)"}return a.stack.toString()}function pa(){var a=oa();f.extraStackTrace&&(a+="\n"+f.extraStackTrace());return na(a)}i=65536;function qa(a,b){a%b>0&&(a+=b-a%b);return a}var y,z,A,ra,B,sa,ta;function ua(){f.HEAP8=z=new Int8Array(y),f.HEAP16=ra=new Int16Array(y),f.HEAP32=B=new Int32Array(y),f.HEAPU8=A=new Uint8Array(y),f.HEAPU16=new Uint16Array(y),f.HEAPU32=new Uint32Array(y),f.HEAPF32=sa=new Float32Array(y),f.HEAPF64=ta=new Float64Array(y)}j=5385296;var C=142384,D=5242880,E=f.TOTAL_MEMORY||16777216;E<D&&o("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+E+"! (TOTAL_STACK="+D+")");f.wasmMemory?r=f.wasmMemory:r=new WebAssembly.Memory({initial:E/i});r&&(y=r.buffer);E=y.byteLength;ua();B[C>>2]=j;function va(a){while(a.length>0){var b=a.shift();if(typeof b=="function"){b();continue}var c=b.func;typeof c==="number"?b.arg===void 0?f.dynCall_v(c):f.dynCall_vi(c,b.arg):c(b.arg===void 0?null:b.arg)}}var wa=[],xa=[],ya=[],za=[],Aa=!1;function Ba(){if(f.preRun){typeof f.preRun=="function"&&(f.preRun=[f.preRun]);while(f.preRun.length)Ga(f.preRun.shift())}va(wa)}function Ca(){Aa=!0,!f.noFSInit&&!T.init.initialized&&T.init(),P.init(),va(xa)}function Da(){T.ignorePermissions=!1,va(ya)}function Ea(){}function Fa(){if(f.postRun){typeof f.postRun=="function"&&(f.postRun=[f.postRun]);while(f.postRun.length)Ha(f.postRun.shift())}va(za)}function Ga(a){wa.unshift(a)}function Ha(a){za.unshift(a)}var Ia=Math.abs,Ja=Math.ceil,Ka=Math.floor,La=Math.min,F=0,Ma=null,G=null;function Na(a){return a}function Oa(a){F++,f.monitorRunDependencies&&f.monitorRunDependencies(F)}function Pa(a){F--;f.monitorRunDependencies&&f.monitorRunDependencies(F);if(F==0){Ma!==null&&(clearInterval(Ma),Ma=null);if(G){a=G;G=null;a()}}}f.preloadedImages={};f.preloadedAudios={};var Qa="data:application/octet-stream;base64,";function Ra(a){return String.prototype.startsWith?a.startsWith(Qa):a.indexOf(Qa)===0}var H=g;function Sa(){try{if(f.wasmBinary)return new Uint8Array(f.wasmBinary);if(f.readBinary)return f.readBinary(H);else throw"both async and sync fetching of the wasm failed"}catch(a){$(a)}}function Ta(){return!f.wasmBinary&&(k||l)&&typeof fetch==="function"?fetch(H,{credentials:"same-origin"}).then(function(a){if(!a.ok)throw"failed to load wasm binary file at '"+H+"'";return a.arrayBuffer()})["catch"](function(){return Sa()}):new(b("Promise"))(function(a,b){a(Sa())})}function Ua(a){var b={env:a,global:{NaN:NaN,Infinity:Infinity},"global.Math":Math,asm2wasm:ba};function c(b,a){a=b.exports;f.asm=a;Pa("wasm-instantiate")}Oa("wasm-instantiate");function d(a){c(a.instance)}function g(a){return Ta().then(function(a){return WebAssembly.instantiate(a,b)}).then(a,function(a){o("failed to asynchronously prepare wasm: "+a),$(a)})}function h(){if(!f.wasmBinary&&typeof WebAssembly.instantiateStreaming==="function"&&!Ra(H)&&typeof fetch==="function")fetch(H,{credentials:"same-origin"}).then(function(a){return WebAssembly.instantiateStreaming(a,b).then(d,function(a){o("wasm streaming compile failed: "+a),o("falling back to ArrayBuffer instantiation"),g(d)})});else return g(d)}if(f.instantiateWasm)try{a=f.instantiateWasm(b,c);return a}catch(a){o("Module.instantiateWasm callback failed with error: "+a);return!1}h();return{}}f.asm=function(b,c,d){c.memory=r;c.table=new WebAssembly.Table({initial:2194,maximum:2194,element:"anyfunc"});c.__memory_base=1024;c.__table_base=0;b=Ua(c);return b};var I;xa.push({func:function(){vc()}});var J={};function Va(b){var c=64,d=1024,e;!Va.called?(Va.called=!0,J.USER=J.LOGNAME="web_user",J.PATH="/",J.PWD="/",J.HOME="/home/web_user",J.LANG="C.UTF-8",J.LANG=(typeof navigator==="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",J._=f.thisProgram,e=ga(d),c=ga(c*4),B[c>>2]=e,B[b>>2]=c):(c=B[b>>2],e=B[c>>2]);b=[];var g=0;for(var a in J)if(typeof J[a]==="string"){var h=a+"="+J[a];b.push(h);g+=h.length}if(g>d)throw new Error("Environment size exceeded TOTAL_ENV_SIZE!");g=4;for(var d=0;d<b.length;d++){var h=b[d];la(h,e);B[c+d*g>>2]=e;e+=h.length+1}B[c+b.length*g>>2]=0}function Wa(a){return xc(a)}var K={},Xa=[];function Ya(a){if(!a)return;a=K[a];a.refcount++}function Za(b){if(!b||K[b])return b;for(var a in K){var c=+a,d=K[c].adjusted,e=d.length;for(var f=0;f<e;f++)if(d[f]===b)return c}return b}function $a(a){var b=K[a];b&&!b.caught&&(b.caught=!0,W.uncaught_exception--);b&&(b.rethrown=!1);Xa.push(a);Ya(Za(a));return a}var L=0;function ab(a){try{return wc(a)}catch(a){}}function bb(a){if(!a)return;var b=K[a];b.refcount--;b.refcount===0&&!b.rethrown&&(b.destructor&&f.dynCall_vi(b.destructor,a),delete K[a],ab(a))}function cb(){X(0);var a=Xa.pop();a&&(bb(Za(a)),L=0)}function db(a){L||(L=a);throw a}function eb(){var b=L;if(!b)return(q(0),0)|0;var c=K[b],d=c.type;if(!d)return(q(0),b)|0;var e=Array.prototype.slice.call(arguments);uc(d);var a=142368;B[a>>2]=b;b=a;for(var f=0;f<e.length;f++)if(e[f]&&tc(e[f],d,b)){b=B[b>>2];c.adjusted.push(b);return(q(e[f]),b)|0}b=B[b>>2];return(q(d),b)|0}f.___cxa_find_matching_catch=eb;function fb(a,b){return eb(a,b)}function gb(a,b,c){return eb(a,b,c)}function hb(){s=!0;throw"Pure virtual function called!"}function ib(){var a=Xa.pop();a=Za(a);K[a].rethrown||(Xa.push(a),K[a].rethrown=!0);L=a;throw a}function jb(a,b,c){K[a]={ptr:a,adjusted:[a],type:b,destructor:c,refcount:0,caught:!1,rethrown:!1};L=a;!("uncaught_exception"in W)?W.uncaught_exception=1:W.uncaught_exception++;throw a}function kb(){return!!W.uncaught_exception}function lb(){}function M(a){f.___errno_location&&(B[f.___errno_location()>>2]=a);return a}function mb(a,b){M(1);return-1}var N={splitPath:function(a){var b=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return b.exec(a).slice(1)},normalizeArray:function(a,b){var c=0;for(var d=a.length-1;d>=0;d--){var e=a[d];e==="."?a.splice(d,1):e===".."?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c;c--)a.unshift("..");return a},normalize:function(a){var b=a.charAt(0)==="/",c=a.substr(-1)==="/";a=N.normalizeArray(a.split("/").filter(function(a){return!!a}),!b).join("/");!a&&!b&&(a=".");a&&c&&(a+="/");return(b?"/":"")+a},dirname:function(a){a=N.splitPath(a);var b=a[0];a=a[1];if(!b&&!a)return".";a&&(a=a.substr(0,a.length-1));return b+a},basename:function(a){if(a==="/")return"/";var b=a.lastIndexOf("/");return b===-1?a:a.substr(b+1)},extname:function(a){return N.splitPath(a)[3]},join:function(){var a=Array.prototype.slice.call(arguments,0);return N.normalize(a.join("/"))},join2:function(a,b){return N.normalize(a+"/"+b)}},O={resolve:function(){var a="",b=!1;for(var c=arguments.length-1;c>=-1&&!b;c--){var d=c>=0?arguments[c]:T.cwd();if(typeof d!=="string")throw new TypeError("Arguments to path.resolve must be strings");else if(!d)return"";a=d+"/"+a;b=d.charAt(0)==="/"}a=N.normalizeArray(a.split("/").filter(function(a){return!!a}),!b).join("/");return(b?"/":"")+a||"."},relative:function(a,b){a=O.resolve(a).substr(1);b=O.resolve(b).substr(1);function c(a){var b=0;for(;b<a.length;b++)if(a[b]!=="")break;var c=a.length-1;for(;c>=0;c--)if(a[c]!=="")break;return b>c?[]:a.slice(b,c-b+1)}a=c(a.split("/"));c=c(b.split("/"));b=Math.min(a.length,c.length);var d=b;for(var e=0;e<b;e++)if(a[e]!==c[e]){d=e;break}b=[];for(var e=d;e<a.length;e++)b.push("..");b=b.concat(c.slice(d));return b.join("/")}},P={ttys:[],init:function(){},shutdown:function(){},register:function(a,b){P.ttys[a]={input:[],output:[],ops:b},T.registerDevice(a,P.stream_ops)},stream_ops:{open:function(a){var b=P.ttys[a.node.rdev];if(!b)throw new T.ErrnoError(19);a.tty=b;a.seekable=!1},close:function(a){a.tty.ops.flush(a.tty)},flush:function(a){a.tty.ops.flush(a.tty)},read:function(b,a,c,d,e){if(!b.tty||!b.tty.ops.get_char)throw new T.ErrnoError(6);e=0;for(var f=0;f<d;f++){var g;try{g=b.tty.ops.get_char(b.tty)}catch(a){throw new T.ErrnoError(5)}if(g===void 0&&e===0)throw new T.ErrnoError(11);if(g===null||g===void 0)break;e++;a[c+f]=g}e&&(b.node.timestamp=Date.now());return e},write:function(b,a,c,d,e){if(!b.tty||!b.tty.ops.put_char)throw new T.ErrnoError(6);try{for(var e=0;e<d;e++)b.tty.ops.put_char(b.tty,a[c+e])}catch(a){throw new T.ErrnoError(5)}d&&(b.node.timestamp=Date.now());return e}},default_tty_ops:{get_char:function(a){if(!a.input.length){var b=null;typeof window!="undefined"&&typeof window.prompt=="function"?(b=window.prompt("Input: "),b!==null&&(b+="\n")):typeof readline=="function"&&(b=readline(),b!==null&&(b+="\n"));if(!b)return null;a.input=Rb(b,!0)}return a.input.shift()},put_char:function(a,b){b===null||b===10?(n(u(a.output,0)),a.output=[]):b!=0&&a.output.push(b)},flush:function(a){a.output&&a.output.length>0&&(n(u(a.output,0)),a.output=[])}},default_tty1_ops:{put_char:function(a,b){b===null||b===10?(o(u(a.output,0)),a.output=[]):b!=0&&a.output.push(b)},flush:function(a){a.output&&a.output.length>0&&(o(u(a.output,0)),a.output=[])}}},Q={ops_table:null,mount:function(a){return Q.createNode(null,"/",16384|511,0)},createNode:function(a,b,c,d){if(T.isBlkdev(c)||T.isFIFO(c))throw new T.ErrnoError(1);Q.ops_table||(Q.ops_table={dir:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr,lookup:Q.node_ops.lookup,mknod:Q.node_ops.mknod,rename:Q.node_ops.rename,unlink:Q.node_ops.unlink,rmdir:Q.node_ops.rmdir,readdir:Q.node_ops.readdir,symlink:Q.node_ops.symlink},stream:{llseek:Q.stream_ops.llseek}},file:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr},stream:{llseek:Q.stream_ops.llseek,read:Q.stream_ops.read,write:Q.stream_ops.write,allocate:Q.stream_ops.allocate,mmap:Q.stream_ops.mmap,msync:Q.stream_ops.msync}},link:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr,readlink:Q.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Q.node_ops.getattr,setattr:Q.node_ops.setattr},stream:T.chrdev_stream_ops}});c=T.createNode(a,b,c,d);T.isDir(c.mode)?(c.node_ops=Q.ops_table.dir.node,c.stream_ops=Q.ops_table.dir.stream,c.contents={}):T.isFile(c.mode)?(c.node_ops=Q.ops_table.file.node,c.stream_ops=Q.ops_table.file.stream,c.usedBytes=0,c.contents=null):T.isLink(c.mode)?(c.node_ops=Q.ops_table.link.node,c.stream_ops=Q.ops_table.link.stream):T.isChrdev(c.mode)&&(c.node_ops=Q.ops_table.chrdev.node,c.stream_ops=Q.ops_table.chrdev.stream);c.timestamp=Date.now();a&&(a.contents[b]=c);return c},getFileDataAsRegularArray:function(a){if(a.contents&&a.contents.subarray){var b=[];for(var c=0;c<a.usedBytes;++c)b.push(a.contents[c]);return b}return a.contents},getFileDataAsTypedArray:function(a){if(!a.contents)return new Uint8Array();return a.contents.subarray?a.contents.subarray(0,a.usedBytes):new Uint8Array(a.contents)},expandFileStorage:function(a,b){var c=a.contents?a.contents.length:0;if(c>=b)return;var d=1024*1024;b=Math.max(b,c*(c<d?2:1.125)|0);c!=0&&(b=Math.max(b,256));d=a.contents;a.contents=new Uint8Array(b);a.usedBytes>0&&a.contents.set(d.subarray(0,a.usedBytes),0);return},resizeFileStorage:function(a,b){if(a.usedBytes==b)return;if(b==0){a.contents=null;a.usedBytes=0;return}if(!a.contents||a.contents.subarray){var c=a.contents;a.contents=new Uint8Array(new ArrayBuffer(b));c&&a.contents.set(c.subarray(0,Math.min(b,a.usedBytes)));a.usedBytes=b;return}a.contents||(a.contents=[]);if(a.contents.length>b)a.contents.length=b;else while(a.contents.length<b)a.contents.push(0);a.usedBytes=b},node_ops:{getattr:function(a){var b={};b.dev=T.isChrdev(a.mode)?a.id:1;b.ino=a.id;b.mode=a.mode;b.nlink=1;b.uid=0;b.gid=0;b.rdev=a.rdev;T.isDir(a.mode)?b.size=4096:T.isFile(a.mode)?b.size=a.usedBytes:T.isLink(a.mode)?b.size=a.link.length:b.size=0;b.atime=new Date(a.timestamp);b.mtime=new Date(a.timestamp);b.ctime=new Date(a.timestamp);b.blksize=4096;b.blocks=Math.ceil(b.size/b.blksize);return b},setattr:function(a,b){b.mode!==void 0&&(a.mode=b.mode),b.timestamp!==void 0&&(a.timestamp=b.timestamp),b.size!==void 0&&Q.resizeFileStorage(a,b.size)},lookup:function(a,b){throw T.genericErrors[2]},mknod:function(a,b,c,d){return Q.createNode(a,b,c,d)},rename:function(a,b,c){if(T.isDir(a.mode)){var d;try{d=T.lookupNode(b,c)}catch(a){}if(d)for(var e in d.contents)throw new T.ErrnoError(39)}delete a.parent.contents[a.name];a.name=c;b.contents[c]=a;a.parent=b},unlink:function(a,b){delete a.contents[b]},rmdir:function(a,b){var c=T.lookupNode(a,b);for(var d in c.contents)throw new T.ErrnoError(39);delete a.contents[b]},readdir:function(b){var c=[".",".."];for(var a in b.contents){if(!Object.prototype.hasOwnProperty.call(b.contents,a))continue;c.push(a)}return c},symlink:function(a,b,c){a=Q.createNode(a,b,511|40960,0);a.link=c;return a},readlink:function(a){if(!T.isLink(a.mode))throw new T.ErrnoError(22);return a.link}},stream_ops:{read:function(b,a,c,d,e){var f=b.node.contents;if(e>=b.node.usedBytes)return 0;b=Math.min(b.node.usedBytes-e,d);if(b>8&&f.subarray)a.set(f.subarray(e,e+b),c);else for(var d=0;d<b;d++)a[c+d]=f[e+d];return b},write:function(b,a,c,d,e,f){f=!1;if(!d)return 0;b=b.node;b.timestamp=Date.now();if(a.subarray&&(!b.contents||b.contents.subarray))if(f){b.contents=a.subarray(c,c+d);b.usedBytes=d;return d}else if(b.usedBytes===0&&e===0){b.contents=new Uint8Array(a.subarray(c,c+d));b.usedBytes=d;return d}else if(e+d<=b.usedBytes){b.contents.set(a.subarray(c,c+d),e);return d}Q.expandFileStorage(b,e+d);if(b.contents.subarray&&a.subarray)b.contents.set(a.subarray(c,c+d),e);else for(var f=0;f<d;f++)b.contents[e+f]=a[c+f];b.usedBytes=Math.max(b.usedBytes,e+d);return d},llseek:function(a,b,c){b=b;c===1?b+=a.position:c===2&&(T.isFile(a.node.mode)&&(b+=a.node.usedBytes));if(b<0)throw new T.ErrnoError(22);return b},allocate:function(a,b,c){Q.expandFileStorage(a.node,b+c),a.node.usedBytes=Math.max(a.node.usedBytes,b+c)},mmap:function(b,a,c,d,e,f,g){if(!T.isFile(b.node.mode))throw new T.ErrnoError(19);c=b.node.contents;if(!(g&2)&&(c.buffer===a||c.buffer===a.buffer))f=!1,g=c.byteOffset;else{(e>0||e+d<b.node.usedBytes)&&(c.subarray?c=c.subarray(e,e+d):c=Array.prototype.slice.call(c,e,e+d));f=!0;g=xc(d);if(!g)throw new T.ErrnoError(12);a.set(c,g)}return{ptr:g,allocated:f}},msync:function(b,a,c,d,e){if(!T.isFile(b.node.mode))throw new T.ErrnoError(19);if(e&2)return 0;Q.stream_ops.write(b,a,0,d,c,!1);return 0}}},R={dbs:{},indexedDB:function(a){function b(){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(){if(typeof indexedDB!=="undefined")return indexedDB;var a=null;typeof window==="object"&&(a=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB);t(a,"IDBFS used, but indexedDB not supported");return a}),DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(a){return Q.mount.apply(null,arguments)},syncfs:function(a,b,c){R.getLocalSet(a,function(d,e){if(d)return c(d);R.getRemoteSet(a,function(a,d){if(a)return c(a);a=b?d:e;d=b?e:d;R.reconcile(a,d,c)})})},getDB:function(a,b){var c=R.dbs[a];if(c)return b(null,c);var d;try{d=R.indexedDB().open(a,R.DB_VERSION)}catch(a){return b(a)}if(!d)return b("Unable to connect to IndexedDB");d.onupgradeneeded=function(b){var a=b.target.result;b=b.target.transaction;a.objectStoreNames.contains(R.DB_STORE_NAME)?b=b.objectStore(R.DB_STORE_NAME):b=a.createObjectStore(R.DB_STORE_NAME);b.indexNames.contains("timestamp")||b.createIndex("timestamp","timestamp",{unique:!1})};d.onsuccess=function(){c=d.result,R.dbs[a]=c,b(null,c)};d.onerror=function(a){b(this.error),a.preventDefault()}},getLocalSet:function(a,b){var c={};function d(a){return a!=="."&&a!==".."}function e(a){return function(b){return N.join2(a,b)}}a=T.readdir(a.mountpoint).filter(d).map(e(a.mountpoint));while(a.length){var f=a.pop(),g;try{g=T.stat(f)}catch(a){return b(a)}T.isDir(g.mode)&&a.push.apply(a,T.readdir(f).filter(d).map(e(f)));c[f]={timestamp:g.mtime}}return b(null,{type:"local",entries:c})},getRemoteSet:function(a,b){var c={};R.getDB(a.mountpoint,function(a,d){if(a)return b(a);try{a=d.transaction([R.DB_STORE_NAME],"readonly");a.onerror=function(a){b(this.error),a.preventDefault()};a=a.objectStore(R.DB_STORE_NAME);a=a.index("timestamp");a.openKeyCursor().onsuccess=function(a){a=a.target.result;if(!a)return b(null,{type:"remote",db:d,entries:c});c[a.primaryKey]={timestamp:a.key};a["continue"]()}}catch(a){return b(a)}})},loadLocalEntry:function(a,b){try{var c=T.lookupPath(a);c=c.node;a=T.stat(a)}catch(a){return b(a)}if(T.isDir(a.mode))return b(null,{timestamp:a.mtime,mode:a.mode});else if(T.isFile(a.mode)){c.contents=Q.getFileDataAsTypedArray(c);return b(null,{timestamp:a.mtime,mode:a.mode,contents:c.contents})}else return b(new Error("node type not supported"))},storeLocalEntry:function(a,b,c){try{if(T.isDir(b.mode))T.mkdir(a,b.mode);else if(T.isFile(b.mode))T.writeFile(a,b.contents,{canOwn:!0});else return c(new Error("node type not supported"));T.chmod(a,b.mode);T.utime(a,b.timestamp,b.timestamp)}catch(a){return c(a)}c(null)},removeLocalEntry:function(a,b){try{T.lookupPath(a);var c=T.stat(a);T.isDir(c.mode)?T.rmdir(a):T.isFile(c.mode)&&T.unlink(a)}catch(a){return b(a)}b(null)},loadRemoteEntry:function(a,b,c){a=a.get(b);a.onsuccess=function(a){c(null,a.target.result)};a.onerror=function(a){c(this.error),a.preventDefault()}},storeRemoteEntry:function(a,b,c,d){a=a.put(c,b);a.onsuccess=function(){d(null)};a.onerror=function(a){d(this.error),a.preventDefault()}},removeRemoteEntry:function(a,b,c){a=a["delete"](b);a.onsuccess=function(){c(null)};a.onerror=function(a){c(this.error),a.preventDefault()}},reconcile:function(a,b,c){var d=0,e=[];Object.keys(a.entries).forEach(function(c){var f=a.entries[c],g=b.entries[c];(!g||f.timestamp>g.timestamp)&&(e.push(c),d++)});var f=[];Object.keys(b.entries).forEach(function(c){b.entries[c];var e=a.entries[c];e||(f.push(c),d++)});if(!d)return c(null);var g=!1,h=a.type==="remote"?a.db:b.db;h=h.transaction([R.DB_STORE_NAME],"readwrite");var i=h.objectStore(R.DB_STORE_NAME);function k(a){if(a&&!g){g=!0;return c(a)}}h.onerror=function(a){k(this.error),a.preventDefault()};h.oncomplete=function(a){g||c(null)};e.sort().forEach(function(a){b.type==="local"?R.loadRemoteEntry(i,a,function(b,c){if(b)return k(b);R.storeLocalEntry(a,c,k)}):R.loadLocalEntry(a,function(b,c){if(b)return k(b);R.storeRemoteEntry(i,a,c,k)})});f.sort().reverse().forEach(function(a){b.type==="local"?R.removeLocalEntry(a,k):R.removeRemoteEntry(i,a,k)})}},S={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(a){t(l);S.reader||(S.reader=new FileReaderSync());var b=S.createNode(null,"/",S.DIR_MODE,0),c={};function d(a){a=a.split("/");var d=b;for(var e=0;e<a.length-1;e++){var f=a.slice(0,e+1).join("/");c[f]||(c[f]=S.createNode(d,a[e],S.DIR_MODE,0));d=c[f]}return d}function e(a){a=a.split("/");return a[a.length-1]}Array.prototype.forEach.call(a.opts.files||[],function(a){S.createNode(d(a.name),e(a.name),S.FILE_MODE,0,a,a.lastModifiedDate)});(a.opts.blobs||[]).forEach(function(a){S.createNode(d(a.name),e(a.name),S.FILE_MODE,0,a.data)});(a.opts.packages||[]).forEach(function(a){a.metadata.files.forEach(function(b){var c=b.filename.substr(1);S.createNode(d(c),e(c),S.FILE_MODE,0,a.blob.slice(b.start,b.end))})});return b},createNode:function(a,b,c,d,e,f){d=T.createNode(a,b,c);d.mode=c;d.node_ops=S.node_ops;d.stream_ops=S.stream_ops;d.timestamp=(f||new Date()).getTime();t(S.FILE_MODE!==S.DIR_MODE);c===S.FILE_MODE?(d.size=e.size,d.contents=e):(d.size=4096,d.contents={});a&&(a.contents[b]=d);return d},node_ops:{getattr:function(a){return{dev:1,ino:void 0,mode:a.mode,nlink:1,uid:0,gid:0,rdev:void 0,size:a.size,atime:new Date(a.timestamp),mtime:new Date(a.timestamp),ctime:new Date(a.timestamp),blksize:4096,blocks:Math.ceil(a.size/4096)}},setattr:function(a,b){b.mode!==void 0&&(a.mode=b.mode),b.timestamp!==void 0&&(a.timestamp=b.timestamp)},lookup:function(a,b){throw new T.ErrnoError(2)},mknod:function(a,b,c,d){throw new T.ErrnoError(1)},rename:function(a,b,c){throw new T.ErrnoError(1)},unlink:function(a,b){throw new T.ErrnoError(1)},rmdir:function(a,b){throw new T.ErrnoError(1)},readdir:function(b){var c=[".",".."];for(var a in b.contents){if(!Object.prototype.hasOwnProperty.call(b.contents,a))continue;c.push(a)}return c},symlink:function(a,b,c){throw new T.ErrnoError(1)},readlink:function(a){throw new T.ErrnoError(1)}},stream_ops:{read:function(b,a,c,d,e){if(e>=b.node.size)return 0;b=b.node.contents.slice(e,e+d);e=S.reader.readAsArrayBuffer(b);a.set(new Uint8Array(e),c);return b.size},write:function(b,a,c,d,e){throw new T.ErrnoError(5)},llseek:function(a,b,c){b=b;c===1?b+=a.position:c===2&&(T.isFile(a.node.mode)&&(b+=a.node.size));if(b<0)throw new T.ErrnoError(22);return b}}},T={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(a){if(!(a instanceof T.ErrnoError))throw a+" : "+pa();return M(a.errno)},lookupPath:function(b,c){b=O.resolve(T.cwd(),b);c=c||{};if(!b)return{path:"",node:null};var d={follow_mount:!0,recurse_count:0};for(var a in d)c[a]===void 0&&(c[a]=d[a]);if(c.recurse_count>8)throw new T.ErrnoError(40);d=N.normalizeArray(b.split("/").filter(function(a){return!!a}),!1);b=T.root;var e="/";for(var f=0;f<d.length;f++){var g=f===d.length-1;if(g&&c.parent)break;b=T.lookupNode(b,d[f]);e=N.join2(e,d[f]);T.isMountpoint(b)&&((!g||g&&c.follow_mount)&&(b=b.mounted.root));if(!g||c.follow){g=0;while(T.isLink(b.mode)){var h=T.readlink(e);e=O.resolve(N.dirname(e),h);h=T.lookupPath(e,{recurse_count:c.recurse_count});b=h.node;if(g++>40)throw new T.ErrnoError(40)}}}return{path:e,node:b}},getPath:function(a){var b;while(!0){if(T.isRoot(a)){var c=a.mount.mountpoint;return!b?c:c[c.length-1]!=="/"?c+"/"+b:c+b}b=b?a.name+"/"+b:a.name;a=a.parent}},hashName:function(a,b){var c=0;for(var d=0;d<b.length;d++)c=(c<<5)-c+b.charCodeAt(d)|0;return(a+c>>>0)%T.nameTable.length},hashAddNode:function(a){var b=T.hashName(a.parent.id,a.name);a.name_next=T.nameTable[b];T.nameTable[b]=a},hashRemoveNode:function(a){var b=T.hashName(a.parent.id,a.name);if(T.nameTable[b]===a)T.nameTable[b]=a.name_next;else{b=T.nameTable[b];while(b){if(b.name_next===a){b.name_next=a.name_next;break}b=b.name_next}}},lookupNode:function(b,c){var a=T.mayLookup(b);if(a)throw new T.ErrnoError(a,b);a=T.hashName(b.id,c);for(var a=T.nameTable[a];a;a=a.name_next){var d=a.name;if(a.parent.id===b.id&&d===c)return a}return T.lookup(b,c)},createNode:function(a,b,c,d){if(!T.FSNode){T.FSNode=function(a,b,c,d){a||(a=this),this.parent=a,this.mount=a.mount,this.mounted=null,this.id=T.nextInode++,this.name=b,this.mode=c,this.node_ops={},this.stream_ops={},this.rdev=d};T.FSNode.prototype={};var e=292|73,f=146;Object.defineProperties(T.FSNode.prototype,{read:{get:function(){return(this.mode&e)===e},set:function(a){a?this.mode|=e:this.mode&=~e}},write:{get:function(){return(this.mode&f)===f},set:function(a){a?this.mode|=f:this.mode&=~f}},isFolder:{get:function(){return T.isDir(this.mode)}},isDevice:{get:function(){return T.isChrdev(this.mode)}}})}a=new T.FSNode(a,b,c,d);T.hashAddNode(a);return a},destroyNode:function(a){T.hashRemoveNode(a)},isRoot:function(a){return a===a.parent},isMountpoint:function(a){return!!a.mounted},isFile:function(a){return(a&61440)===32768},isDir:function(a){return(a&61440)===16384},isLink:function(a){return(a&61440)===40960},isChrdev:function(a){return(a&61440)===8192},isBlkdev:function(a){return(a&61440)===24576},isFIFO:function(a){return(a&61440)===4096},isSocket:function(a){return(a&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(a){var b=T.flagModes[a];if(typeof b==="undefined")throw new Error("Unknown file open mode: "+a);return b},flagsToPermissionString:function(a){var b=["r","w","rw"][a&3];a&512&&(b+="w");return b},nodePermissions:function(a,b){if(T.ignorePermissions)return 0;if(b.indexOf("r")!==-1&&!(a.mode&292))return 13;else if(b.indexOf("w")!==-1&&!(a.mode&146))return 13;else if(b.indexOf("x")!==-1&&!(a.mode&73))return 13;return 0},mayLookup:function(b){var a=T.nodePermissions(b,"x");if(a)return a;return!b.node_ops.lookup?13:0},mayCreate:function(a,b){try{T.lookupNode(a,b);return 17}catch(a){}return T.nodePermissions(a,"wx")},mayDelete:function(a,b,c){try{b=T.lookupNode(a,b)}catch(a){return a.errno}a=T.nodePermissions(a,"wx");if(a)return a;if(c){if(!T.isDir(b.mode))return 20;if(T.isRoot(b)||T.getPath(b)===T.cwd())return 16}else if(T.isDir(b.mode))return 21;return 0},mayOpen:function(a,b){if(!a)return 2;if(T.isLink(a.mode))return 40;else if(T.isDir(a.mode)&&(T.flagsToPermissionString(b)!=="r"||b&512))return 21;return T.nodePermissions(a,T.flagsToPermissionString(b))},MAX_OPEN_FDS:4096,nextfd:function(a,b){a=a||0;b=b||T.MAX_OPEN_FDS;for(var a=a;a<=b;a++)if(!T.streams[a])return a;throw new T.ErrnoError(24)},getStream:function(a){return T.streams[a]},createStream:function(a,b,c){T.FSStream||(T.FSStream=function(){},T.FSStream.prototype={},Object.defineProperties(T.FSStream.prototype,{object:{get:function(){return this.node},set:function(a){this.node=a}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}}));var d=new T.FSStream();for(var e in a)d[e]=a[e];a=d;d=T.nextfd(b,c);a.fd=d;T.streams[d]=a;return a},closeStream:function(a){T.streams[a]=null},chrdev_stream_ops:{open:function(a){var b=T.getDevice(a.node.rdev);a.stream_ops=b.stream_ops;a.stream_ops.open&&a.stream_ops.open(a)},llseek:function(){throw new T.ErrnoError(29)}},major:function(a){return a>>8},minor:function(a){return a&255},makedev:function(a,b){return a<<8|b},registerDevice:function(a,b){T.devices[a]={stream_ops:b}},getDevice:function(a){return T.devices[a]},getMounts:function(a){var b=[];a=[a];while(a.length){var c=a.pop();b.push(c);a.push.apply(a,c.mounts)}return b},syncfs:function(a,b){typeof a==="function"&&(b=a,a=!1);T.syncFSRequests++;T.syncFSRequests>1;var c=T.getMounts(T.root.mount),d=0;function e(a){T.syncFSRequests--;return b(a)}function f(a){if(a){if(!f.errored){f.errored=!0;return e(a)}return}++d>=c.length&&e(null)}c.forEach(function(b){if(!b.type.syncfs)return f(null);b.type.syncfs(b,a,f)})},mount:function(a,b,c){var d=c==="/",e=!c,f;if(d&&T.root)throw new T.ErrnoError(16);else if(!d&&!e){e=T.lookupPath(c,{follow_mount:!1});c=e.path;f=e.node;if(T.isMountpoint(f))throw new T.ErrnoError(16);if(!T.isDir(f.mode))throw new T.ErrnoError(20)}e={type:a,opts:b,mountpoint:c,mounts:[]};b=a.mount(e);b.mount=e;e.root=b;d?T.root=b:f&&(f.mounted=e,f.mount&&f.mount.mounts.push(e));return b},unmount:function(a){a=T.lookupPath(a,{follow_mount:!1});if(!T.isMountpoint(a.node))throw new T.ErrnoError(22);a=a.node;var b=a.mounted,c=T.getMounts(b);Object.keys(T.nameTable).forEach(function(a){a=T.nameTable[a];while(a){var b=a.name_next;c.indexOf(a.mount)!==-1&&T.destroyNode(a);a=b}});a.mounted=null;b=a.mount.mounts.indexOf(b);a.mount.mounts.splice(b,1)},lookup:function(a,b){return a.node_ops.lookup(a,b)},mknod:function(b,c,d){var e=T.lookupPath(b,{parent:!0});e=e.node;b=N.basename(b);if(!b||b==="."||b==="..")throw new T.ErrnoError(22);var a=T.mayCreate(e,b);if(a)throw new T.ErrnoError(a);if(!e.node_ops.mknod)throw new T.ErrnoError(1);return e.node_ops.mknod(e,b,c,d)},create:function(a,b){b=b!==void 0?b:438;b&=4095;b|=32768;return T.mknod(a,b,0)},mkdir:function(a,b){b=b!==void 0?b:511;b&=511|512;b|=16384;return T.mknod(a,b,0)},mkdirTree:function(a,b){a=a.split("/");var c="";for(var d=0;d<a.length;++d){if(!a[d])continue;c+="/"+a[d];try{T.mkdir(c,b)}catch(a){if(a.errno!=17)throw a}}},mkdev:function(a,b,c){typeof c==="undefined"&&(c=b,b=438);b|=8192;return T.mknod(a,b,c)},symlink:function(b,c){if(!O.resolve(b))throw new T.ErrnoError(2);var d=T.lookupPath(c,{parent:!0});d=d.node;if(!d)throw new T.ErrnoError(2);c=N.basename(c);var a=T.mayCreate(d,c);if(a)throw new T.ErrnoError(a);if(!d.node_ops.symlink)throw new T.ErrnoError(1);return d.node_ops.symlink(d,c,b)},rename:function(a,b){var c=N.dirname(a),d=N.dirname(b),e=N.basename(a),f=N.basename(b),g,h;try{g=T.lookupPath(a,{parent:!0}),h=g.node,g=T.lookupPath(b,{parent:!0}),g=g.node}catch(a){throw new T.ErrnoError(16)}if(!h||!g)throw new T.ErrnoError(2);if(h.mount!==g.mount)throw new T.ErrnoError(18);var i=T.lookupNode(h,e);d=O.relative(a,d);if(d.charAt(0)!==".")throw new T.ErrnoError(22);d=O.relative(b,c);if(d.charAt(0)!==".")throw new T.ErrnoError(39);try{c=T.lookupNode(g,f)}catch(a){}if(i===c)return;d=T.isDir(i.mode);e=T.mayDelete(h,e,d);if(e)throw new T.ErrnoError(e);e=c?T.mayDelete(g,f,d):T.mayCreate(g,f);if(e)throw new T.ErrnoError(e);if(!h.node_ops.rename)throw new T.ErrnoError(1);if(T.isMountpoint(i)||c&&T.isMountpoint(c))throw new T.ErrnoError(16);if(g!==h){e=T.nodePermissions(h,"w");if(e)throw new T.ErrnoError(e)}try{T.trackingDelegate.willMovePath&&T.trackingDelegate.willMovePath(a,b)}catch(a){}T.hashRemoveNode(i);try{h.node_ops.rename(i,g,f)}catch(a){throw a}finally{T.hashAddNode(i)}try{T.trackingDelegate.onMovePath&&T.trackingDelegate.onMovePath(a,b)}catch(a){}},rmdir:function(b){var c=T.lookupPath(b,{parent:!0});c=c.node;var d=N.basename(b),e=T.lookupNode(c,d),a=T.mayDelete(c,d,!0);if(a)throw new T.ErrnoError(a);if(!c.node_ops.rmdir)throw new T.ErrnoError(1);if(T.isMountpoint(e))throw new T.ErrnoError(16);try{T.trackingDelegate.willDeletePath&&T.trackingDelegate.willDeletePath(b)}catch(a){}c.node_ops.rmdir(c,d);T.destroyNode(e);try{T.trackingDelegate.onDeletePath&&T.trackingDelegate.onDeletePath(b)}catch(a){}},readdir:function(a){a=T.lookupPath(a,{follow:!0});a=a.node;if(!a.node_ops.readdir)throw new T.ErrnoError(20);return a.node_ops.readdir(a)},unlink:function(b){var c=T.lookupPath(b,{parent:!0});c=c.node;var d=N.basename(b),e=T.lookupNode(c,d),a=T.mayDelete(c,d,!1);if(a)throw new T.ErrnoError(a);if(!c.node_ops.unlink)throw new T.ErrnoError(1);if(T.isMountpoint(e))throw new T.ErrnoError(16);try{T.trackingDelegate.willDeletePath&&T.trackingDelegate.willDeletePath(b)}catch(a){}c.node_ops.unlink(c,d);T.destroyNode(e);try{T.trackingDelegate.onDeletePath&&T.trackingDelegate.onDeletePath(b)}catch(a){}},readlink:function(a){a=T.lookupPath(a);a=a.node;if(!a)throw new T.ErrnoError(2);if(!a.node_ops.readlink)throw new T.ErrnoError(22);return O.resolve(T.getPath(a.parent),a.node_ops.readlink(a))},stat:function(a,b){a=T.lookupPath(a,{follow:!b});b=a.node;if(!b)throw new T.ErrnoError(2);if(!b.node_ops.getattr)throw new T.ErrnoError(1);return b.node_ops.getattr(b)},lstat:function(a){return T.stat(a,!0)},chmod:function(a,b,c){if(typeof a==="string"){c=T.lookupPath(a,{follow:!c});c=c.node}else c=a;if(!c.node_ops.setattr)throw new T.ErrnoError(1);c.node_ops.setattr(c,{mode:b&4095|c.mode&-4096,timestamp:Date.now()})},lchmod:function(a,b){T.chmod(a,b,!0)},fchmod:function(a,b){a=T.getStream(a);if(!a)throw new T.ErrnoError(9);T.chmod(a.node,b)},chown:function(a,b,c,d){if(typeof a==="string"){b=T.lookupPath(a,{follow:!d});c=b.node}else c=a;if(!c.node_ops.setattr)throw new T.ErrnoError(1);c.node_ops.setattr(c,{timestamp:Date.now()})},lchown:function(a,b,c){T.chown(a,b,c,!0)},fchown:function(a,b,c){a=T.getStream(a);if(!a)throw new T.ErrnoError(9);T.chown(a.node,b,c)},truncate:function(a,b){if(b<0)throw new T.ErrnoError(22);if(typeof a==="string"){var c=T.lookupPath(a,{follow:!0});c=c.node}else c=a;if(!c.node_ops.setattr)throw new T.ErrnoError(1);if(T.isDir(c.mode))throw new T.ErrnoError(21);if(!T.isFile(c.mode))throw new T.ErrnoError(22);a=T.nodePermissions(c,"w");if(a)throw new T.ErrnoError(a);c.node_ops.setattr(c,{size:b,timestamp:Date.now()})},ftruncate:function(a,b){a=T.getStream(a);if(!a)throw new T.ErrnoError(9);if((a.flags&2097155)===0)throw new T.ErrnoError(22);T.truncate(a.node,b)},utime:function(a,b,c){a=T.lookupPath(a,{follow:!0});a=a.node;a.node_ops.setattr(a,{timestamp:Math.max(b,c)})},open:function(a,b,c,d,e){if(a==="")throw new T.ErrnoError(2);b=typeof b==="string"?T.modeStringToFlags(b):b;c=typeof c==="undefined"?438:c;b&64?c=c&4095|32768:c=0;var g;if(typeof a==="object")g=a;else{a=N.normalize(a);try{var h=T.lookupPath(a,{follow:!(b&131072)});g=h.node}catch(a){}}h=!1;if(b&64)if(g){if(b&128)throw new T.ErrnoError(17)}else g=T.mknod(a,c,0),h=!0;if(!g)throw new T.ErrnoError(2);T.isChrdev(g.mode)&&(b&=-513);if(b&65536&&!T.isDir(g.mode))throw new T.ErrnoError(20);if(!h){c=T.mayOpen(g,b);if(c)throw new T.ErrnoError(c)}b&512&&T.truncate(g,0);b&=~(128|512);h=T.createStream({node:g,path:T.getPath(g),flags:b,seekable:!0,position:0,stream_ops:g.stream_ops,ungotten:[],error:!1},d,e);h.stream_ops.open&&h.stream_ops.open(h);f.logReadFiles&&!(b&1)&&(T.readFiles||(T.readFiles={}),a in T.readFiles||(T.readFiles[a]=1));try{if(T.trackingDelegate.onOpenFile){c=0;(b&2097155)!==1&&(c|=T.tracking.openFlags.READ);(b&2097155)!==0&&(c|=T.tracking.openFlags.WRITE);T.trackingDelegate.onOpenFile(a,c)}}catch(a){}return h},close:function(a){if(T.isClosed(a))throw new T.ErrnoError(9);a.getdents&&(a.getdents=null);try{a.stream_ops.close&&a.stream_ops.close(a)}catch(a){throw a}finally{T.closeStream(a.fd)}a.fd=null},isClosed:function(a){return a.fd===null},llseek:function(a,b,c){if(T.isClosed(a))throw new T.ErrnoError(9);if(!a.seekable||!a.stream_ops.llseek)throw new T.ErrnoError(29);if(c!=0&&c!=1&&c!=2)throw new T.ErrnoError(22);a.position=a.stream_ops.llseek(a,b,c);a.ungotten=[];return a.position},read:function(b,a,c,d,e){if(d<0||e<0)throw new T.ErrnoError(22);if(T.isClosed(b))throw new T.ErrnoError(9);if((b.flags&2097155)===1)throw new T.ErrnoError(9);if(T.isDir(b.node.mode))throw new T.ErrnoError(21);if(!b.stream_ops.read)throw new T.ErrnoError(22);var f=typeof e!=="undefined";if(!f)e=b.position;else if(!b.seekable)throw new T.ErrnoError(29);a=b.stream_ops.read(b,a,c,d,e);f||(b.position+=a);return a},write:function(b,a,c,d,e,f){if(d<0||e<0)throw new T.ErrnoError(22);if(T.isClosed(b))throw new T.ErrnoError(9);if((b.flags&2097155)===0)throw new T.ErrnoError(9);if(T.isDir(b.node.mode))throw new T.ErrnoError(21);if(!b.stream_ops.write)throw new T.ErrnoError(22);b.flags&1024&&T.llseek(b,0,2);var g=typeof e!=="undefined";if(!g)e=b.position;else if(!b.seekable)throw new T.ErrnoError(29);a=b.stream_ops.write(b,a,c,d,e,f);g||(b.position+=a);try{b.path&&T.trackingDelegate.onWriteToFile&&T.trackingDelegate.onWriteToFile(b.path)}catch(a){}return a},allocate:function(a,b,c){if(T.isClosed(a))throw new T.ErrnoError(9);if(b<0||c<=0)throw new T.ErrnoError(22);if((a.flags&2097155)===0)throw new T.ErrnoError(9);if(!T.isFile(a.node.mode)&&!T.isDir(a.node.mode))throw new T.ErrnoError(19);if(!a.stream_ops.allocate)throw new T.ErrnoError(95);a.stream_ops.allocate(a,b,c)},mmap:function(b,a,c,d,e,f,g){if((f&2)!==0&&(g&2)===0&&(b.flags&2097155)!==2)throw new T.ErrnoError(13);if((b.flags&2097155)===1)throw new T.ErrnoError(13);if(!b.stream_ops.mmap)throw new T.ErrnoError(19);return b.stream_ops.mmap(b,a,c,d,e,f,g)},msync:function(b,a,c,d,e){return!b||!b.stream_ops.msync?0:b.stream_ops.msync(b,a,c,d,e)},munmap:function(a){return 0},ioctl:function(a,b,c){if(!a.stream_ops.ioctl)throw new T.ErrnoError(25);return a.stream_ops.ioctl(a,b,c)},readFile:function(a,b){b=b||{};b.flags=b.flags||"r";b.encoding=b.encoding||"binary";if(b.encoding!=="utf8"&&b.encoding!=="binary")throw new Error('Invalid encoding type "'+b.encoding+'"');var c,d=T.open(a,b.flags);a=T.stat(a);a=a.size;var e=new Uint8Array(a);T.read(d,e,0,a,0);b.encoding==="utf8"?c=u(e,0):b.encoding==="binary"&&(c=e);T.close(d);return c},writeFile:function(a,b,c){c=c||{};c.flags=c.flags||"w";a=T.open(a,c.flags,c.mode);if(typeof b==="string"){var d=new Uint8Array(x(b)+1),e=w(b,d,0,d.length);T.write(a,d,0,e,void 0,c.canOwn)}else if(ArrayBuffer.isView(b))T.write(a,b,0,b.byteLength,void 0,c.canOwn);else throw new Error("Unsupported data type");T.close(a)},cwd:function(){return T.currentPath},chdir:function(b){b=T.lookupPath(b,{follow:!0});if(b.node===null)throw new T.ErrnoError(2);if(!T.isDir(b.node.mode))throw new T.ErrnoError(20);var a=T.nodePermissions(b.node,"x");if(a)throw new T.ErrnoError(a);T.currentPath=b.path},createDefaultDirectories:function(){T.mkdir("/tmp"),T.mkdir("/home"),T.mkdir("/home/web_user")},createDefaultDevices:function(){T.mkdir("/dev");T.registerDevice(T.makedev(1,3),{read:function(){return 0},write:function(b,a,c,d,e){return d}});T.mkdev("/dev/null",T.makedev(1,3));P.register(T.makedev(5,0),P.default_tty_ops);P.register(T.makedev(6,0),P.default_tty1_ops);T.mkdev("/dev/tty",T.makedev(5,0));T.mkdev("/dev/tty1",T.makedev(6,0));var a;if(typeof crypto==="object"&&typeof crypto.getRandomValues==="function"){var b=new Uint8Array(1);a=function(){crypto.getRandomValues(b);return b[0]}}a||(a=function(){$("random_device")});T.createDevice("/dev","random",a);T.createDevice("/dev","urandom",a);T.mkdir("/dev/shm");T.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){T.mkdir("/proc"),T.mkdir("/proc/self"),T.mkdir("/proc/self/fd"),T.mount({mount:function(){var a=T.createNode("/proc/self","fd",16384|511,73);a.node_ops={lookup:function(a,b){a=+b;var c=T.getStream(a);if(!c)throw new T.ErrnoError(9);b={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return c.path}}};b.parent=b;return b}};return a}},{},"/proc/self/fd")},createStandardStreams:function(){f.stdin?T.createDevice("/dev","stdin",f.stdin):T.symlink("/dev/tty","/dev/stdin"),f.stdout?T.createDevice("/dev","stdout",null,f.stdout):T.symlink("/dev/tty","/dev/stdout"),f.stderr?T.createDevice("/dev","stderr",null,f.stderr):T.symlink("/dev/tty1","/dev/stderr"),T.open("/dev/stdin","r"),T.open("/dev/stdout","w"),T.open("/dev/stderr","w")},ensureErrnoError:function(){if(T.ErrnoError)return;T.ErrnoError=function(a,b){this.node=b,this.setErrno=function(a){this.errno=a},this.setErrno(a),this.message="FS error",this.stack&&Object.defineProperty(this,"stack",{value:new Error().stack,writable:!0})};T.ErrnoError.prototype=new Error();T.ErrnoError.prototype.constructor=T.ErrnoError;[2].forEach(function(a){T.genericErrors[a]=new T.ErrnoError(a),T.genericErrors[a].stack="<generic error, no stack>"})},staticInit:function(){T.ensureErrnoError(),T.nameTable=new Array(4096),T.mount(Q,{},"/"),T.createDefaultDirectories(),T.createDefaultDevices(),T.createSpecialDirectories(),T.filesystems={MEMFS:Q,IDBFS:R,WORKERFS:S}},init:function(a,b,c){T.init.initialized=!0,T.ensureErrnoError(),f.stdin=a||f.stdin,f.stdout=b||f.stdout,f.stderr=c||f.stderr,T.createStandardStreams()},quit:function(){T.init.initialized=!1;var a=f._fflush;a&&a(0);for(var a=0;a<T.streams.length;a++){var b=T.streams[a];if(!b)continue;T.close(b)}},getMode:function(a,b){var c=0;a&&(c|=292|73);b&&(c|=146);return c},joinPath:function(a,b){a=N.join.apply(null,a);b&&a[0]=="/"&&(a=a.substr(1));return a},absolutePath:function(a,b){return O.resolve(b,a)},standardizePath:function(a){return N.normalize(a)},findObject:function(a,b){a=T.analyzePath(a,b);if(a.exists)return a.object;else{M(a.error);return null}},analyzePath:function(a,b){try{var c=T.lookupPath(a,{follow:!b});a=c.path}catch(a){}var d={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var c=T.lookupPath(a,{parent:!0});d.parentExists=!0;d.parentPath=c.path;d.parentObject=c.node;d.name=N.basename(a);c=T.lookupPath(a,{follow:!b});d.exists=!0;d.path=c.path;d.object=c.node;d.name=c.node.name;d.isRoot=c.path==="/"}catch(a){d.error=a.errno}return d},createFolder:function(a,b,c,d){a=N.join2(typeof a==="string"?a:T.getPath(a),b);b=T.getMode(c,d);return T.mkdir(a,b)},createPath:function(a,b,c,d){a=typeof a==="string"?a:T.getPath(a);c=b.split("/").reverse();while(c.length){d=c.pop();if(!d)continue;var e=N.join2(a,d);try{T.mkdir(e)}catch(a){}a=e}return e},createFile:function(a,b,c,d,e){c=N.join2(typeof a==="string"?a:T.getPath(a),b);a=T.getMode(d,e);return T.create(c,a)},createDataFile:function(a,b,c,d,e,f){b=b?N.join2(typeof a==="string"?a:T.getPath(a),b):a;a=T.getMode(d,e);d=T.create(b,a);if(c){if(typeof c==="string"){e=new Array(c.length);for(var b=0,g=c.length;b<g;++b)e[b]=c.charCodeAt(b);c=e}T.chmod(d,a|146);b=T.open(d,"w");T.write(b,c,0,c.length,0,f);T.close(b);T.chmod(d,a)}return d},createDevice:function(a,b,c,d){a=N.join2(typeof a==="string"?a:T.getPath(a),b);b=T.getMode(!!c,!!d);T.createDevice.major||(T.createDevice.major=64);var e=T.makedev(T.createDevice.major++,0);T.registerDevice(e,{open:function(a){a.seekable=!1},close:function(a){d&&d.buffer&&d.buffer.length&&d(10)},read:function(b,a,d,e,f){f=0;for(var g=0;g<e;g++){var h;try{h=c()}catch(a){throw new T.ErrnoError(5)}if(h===void 0&&f===0)throw new T.ErrnoError(11);if(h===null||h===void 0)break;f++;a[d+g]=h}f&&(b.node.timestamp=Date.now());return f},write:function(b,a,c,e,f){for(var f=0;f<e;f++)try{d(a[c+f])}catch(a){throw new T.ErrnoError(5)}e&&(b.node.timestamp=Date.now());return f}});return T.mkdev(a,b,e)},createLink:function(a,b,c,d,e){d=N.join2(typeof a==="string"?a:T.getPath(a),b);return T.symlink(c,d)},forceLoadFile:function(a){if(a.isDevice||a.isFolder||a.link||a.contents)return!0;var b=!0;if(typeof XMLHttpRequest!=="undefined")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");else if(f.read)try{a.contents=Rb(f.read(a.url),!0),a.usedBytes=a.contents.length}catch(a){b=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");b||M(5);return b},createLazyFile:function(a,b,c,d,e){function f(){this.lengthKnown=!1,this.chunks=[]}f.prototype.get=function(a){if(a>this.length-1||a<0)return void 0;var b=a%this.chunkSize;a=a/this.chunkSize|0;return this.getter(a)[b]};f.prototype.setDataGetter=function(a){this.getter=a};f.prototype.cacheLength=function(){var a=new XMLHttpRequest();a.open("HEAD",c,!1);a.send(null);if(!(a.status>=200&&a.status<300||a.status===304))throw new Error("Couldn't load "+c+". Status: "+a.status);var b=Number(a.getResponseHeader("Content-length")),d,e=(d=a.getResponseHeader("Accept-Ranges"))&&d==="bytes";a=(d=a.getResponseHeader("Content-Encoding"))&&d==="gzip";var f=1024*1024;e||(f=b);var g=function(d,e){if(d>e)throw new Error("invalid range ("+d+", "+e+") or no bytes requested!");if(e>b-1)throw new Error("only "+b+" bytes available! programmer error!");var a=new XMLHttpRequest();a.open("GET",c,!1);b!==f&&a.setRequestHeader("Range","bytes="+d+"-"+e);typeof Uint8Array!="undefined"&&(a.responseType="arraybuffer");a.overrideMimeType&&a.overrideMimeType("text/plain; charset=x-user-defined");a.send(null);if(!(a.status>=200&&a.status<300||a.status===304))throw new Error("Couldn't load "+c+". Status: "+a.status);if(a.response!==void 0)return new Uint8Array(a.response||[]);else return Rb(a.responseText||"",!0)},h=this;h.setDataGetter(function(a){var c=a*f,d=(a+1)*f-1;d=Math.min(d,b-1);typeof h.chunks[a]==="undefined"&&(h.chunks[a]=g(c,d));if(typeof h.chunks[a]==="undefined")throw new Error("doXHR failed!");return h.chunks[a]});(a||!b)&&(f=b=1,b=this.getter(0).length,f=b);this._length=b;this._chunkSize=f;this.lengthKnown=!0};if(typeof XMLHttpRequest!=="undefined"){if(!l)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";f=new f();Object.defineProperties(f,{length:{get:function(){this.lengthKnown||this.cacheLength();return this._length}},chunkSize:{get:function(){this.lengthKnown||this.cacheLength();return this._chunkSize}}});f={isDevice:!1,contents:f}}else var f={isDevice:!1,url:c};var g=T.createFile(a,b,f,d,e);f.contents?g.contents=f.contents:f.url&&(g.contents=null,g.url=f.url);Object.defineProperties(g,{usedBytes:{get:function(){return this.contents.length}}});var h={};a=Object.keys(g.stream_ops);a.forEach(function(a){var b=g.stream_ops[a];h[a]=function(){if(!T.forceLoadFile(g))throw new T.ErrnoError(5);return b.apply(null,arguments)}});h.read=function(b,a,c,d,e){if(!T.forceLoadFile(g))throw new T.ErrnoError(5);b=b.node.contents;if(e>=b.length)return 0;d=Math.min(b.length-e,d);if(b.slice)for(var f=0;f<d;f++)a[c+f]=b[e+f];else for(var f=0;f<d;f++)a[c+f]=b.get(e+f);return d};g.stream_ops=h;return g},createPreloadedFile:function(a,b,c,d,e,g,h,i,j,k){Browser.init();var l=b?O.resolve(N.join2(a,b)):a,m=Na("cp "+l);function n(c){function n(c){k&&k(),i||T.createDataFile(a,b,c,d,e,j),g&&g(),Pa(m)}var o=!1;f.preloadPlugins.forEach(function(a){if(o)return;a.canHandle(l)&&(a.handle(c,l,n,function(){h&&h(),Pa(m)}),o=!0)});o||n(c)}Oa(m);typeof c=="string"?Browser.asyncLoad(c,function(a){n(a)},h):n(c)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(a,b,c){b=b||function(){};c=c||function(){};var d=T.indexedDB();try{var e=d.open(T.DB_NAME(),T.DB_VERSION)}catch(a){return c(a)}e.onupgradeneeded=function(){var a=e.result;a.createObjectStore(T.DB_STORE_NAME)};e.onsuccess=function(){var d=e.result;d=d.transaction([T.DB_STORE_NAME],"readwrite");var f=d.objectStore(T.DB_STORE_NAME),g=0,h=0,i=a.length;function j(){h==0?b():c()}a.forEach(function(a){a=f.put(T.analyzePath(a).object.contents,a);a.onsuccess=function(){g++,g+h==i&&j()};a.onerror=function(){h++,g+h==i&&j()}});d.onerror=c};e.onerror=c},loadFilesFromDB:function(a,b,c){b=b||function(){};c=c||function(){};var d=T.indexedDB();try{var e=d.open(T.DB_NAME(),T.DB_VERSION)}catch(a){return c(a)}e.onupgradeneeded=c;e.onsuccess=function(){var d=e.result;try{d=d.transaction([T.DB_STORE_NAME],"readonly")}catch(a){c(a);return}var f=d.objectStore(T.DB_STORE_NAME),g=0,h=0,i=a.length;function j(){h==0?b():c()}a.forEach(function(a){var b=f.get(a);b.onsuccess=function(){T.analyzePath(a).exists&&T.unlink(a),T.createDataFile(N.dirname(a),N.basename(a),b.result,!0,!0,!0),g++,g+h==i&&j()};b.onerror=function(){h++,g+h==i&&j()}});d.onerror=c};e.onerror=c}},U={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(a,b){if(b[0]!=="/"){var c;if(a===-100)c=T.cwd();else{a=T.getStream(a);if(!a)throw new T.ErrnoError(9);c=a.path}b=N.join2(c,b)}return b},doStat:function(a,b,c){try{a=a(b)}catch(a){if(a&&a.node&&N.normalize(b)!==N.normalize(T.getPath(a.node)))return-20;throw a}B[c>>2]=a.dev;B[c+4>>2]=0;B[c+8>>2]=a.ino;B[c+12>>2]=a.mode;B[c+16>>2]=a.nlink;B[c+20>>2]=a.uid;B[c+24>>2]=a.gid;B[c+28>>2]=a.rdev;B[c+32>>2]=0;I=[a.size>>>0,(p=a.size,+Ia(p)>=1?p>0?(La(+Ka(p/4294967296),4294967295)|0)>>>0:~~+Ja((p-+(~~p>>>0))/4294967296)>>>0:0)],B[c+40>>2]=I[0],B[c+44>>2]=I[1];B[c+48>>2]=4096;B[c+52>>2]=a.blocks;B[c+56>>2]=a.atime.getTime()/1e3|0;B[c+60>>2]=0;B[c+64>>2]=a.mtime.getTime()/1e3|0;B[c+68>>2]=0;B[c+72>>2]=a.ctime.getTime()/1e3|0;B[c+76>>2]=0;I=[a.ino>>>0,(p=a.ino,+Ia(p)>=1?p>0?(La(+Ka(p/4294967296),4294967295)|0)>>>0:~~+Ja((p-+(~~p>>>0))/4294967296)>>>0:0)],B[c+80>>2]=I[0],B[c+84>>2]=I[1];return 0},doMsync:function(a,b,c,d){a=new Uint8Array(A.subarray(a,a+c));T.msync(b,a,0,c,d)},doMkdir:function(a,b){a=N.normalize(a);a[a.length-1]==="/"&&(a=a.substr(0,a.length-1));T.mkdir(a,b,0);return 0},doMknod:function(a,b,c){switch(b&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-22}T.mknod(a,b,c);return 0},doReadlink:function(a,b,c){if(c<=0)return-22;a=T.readlink(a);var d=Math.min(c,x(a)),e=z[b+d];ia(a,b,c+1);z[b+d]=e;return d},doAccess:function(a,b){if(b&-8)return-22;a=T.lookupPath(a,{follow:!0});a=a.node;var c="";b&4&&(c+="r");b&2&&(c+="w");b&1&&(c+="x");return c&&T.nodePermissions(a,c)?-13:0},doDup:function(a,b,c){var d=T.getStream(c);d&&T.close(d);return T.open(a,b,0,c,c).fd},doReadv:function(a,b,c,d){var e=0;for(var f=0;f<c;f++){var g=B[b+f*8>>2],h=B[b+(f*8+4)>>2];g=T.read(a,z,g,h,d);if(g<0)return-1;e+=g;if(g<h)break}return e},doWritev:function(a,b,c,d){var e=0;for(var f=0;f<c;f++){var g=B[b+f*8>>2],h=B[b+(f*8+4)>>2];g=T.write(a,z,g,h,d);if(g<0)return-1;e+=g}return e},varargs:0,get:function(a){U.varargs+=4;a=B[U.varargs-4>>2];return a},getStr:function(){var a=v(U.get());return a},getStreamFromFD:function(){var a=T.getStream(U.get());if(!a)throw new T.ErrnoError(9);return a},get64:function(){var a=U.get();U.get();return a},getZero:function(){U.get()}};function nb(a,b){U.varargs=b;try{a=U.getStreamFromFD();b=U.get();var c=U.get(),d=U.get(),e=U.get(),f=4294967296;b=b*f+(c>>>0);f=9007199254740992;if(b<=-f||b>=f)return-75;T.llseek(a,b,e);I=[a.position>>>0,(p=a.position,+Ia(p)>=1?p>0?(La(+Ka(p/4294967296),4294967295)|0)>>>0:~~+Ja((p-+(~~p>>>0))/4294967296)>>>0:0)],B[d>>2]=I[0],B[d+4>>2]=I[1];a.getdents&&b===0&&e===0&&(a.getdents=null);return 0}catch(a){(typeof T==="undefined"||!(a instanceof T.ErrnoError))&&$(a);return-a.errno}}function ob(a,b){U.varargs=b;try{a=U.getStreamFromFD();b=U.get();var c=U.get();return U.doWritev(a,b,c)}catch(a){(typeof T==="undefined"||!(a instanceof T.ErrnoError))&&$(a);return-a.errno}}function pb(a,b){U.varargs=b;try{a=U.getStreamFromFD();T.close(a);return 0}catch(a){(typeof T==="undefined"||!(a instanceof T.ErrnoError))&&$(a);return-a.errno}}function qb(a,b){if(a==-1||b==0)return-22;var c=U.mappings[a];if(!c)return 0;if(b===c.len){var d=T.getStream(c.fd);U.doMsync(a,d,b,c.flags);T.munmap(d);U.mappings[a]=null;c.allocated&&wc(c.malloc)}return 0}function rb(a,b){U.varargs=b;try{a=U.get();b=U.get();return qb(a,b)}catch(a){(typeof T==="undefined"||!(a instanceof T.ErrnoError))&&$(a);return-a.errno}}function sb(){}function tb(){f.abort()}function ub(){$()}function vb(){return typeof performance==="object"&&performance&&typeof performance.now==="function"}function wb(a,b){var c;if(a===0)c=Date.now();else if(a===1&&vb())c=ub();else{M(22);return-1}B[b>>2]=c/1e3|0;B[b+4>>2]=c%1e3*1e3*1e3|0;return 0}function xb(){return z.length}function yb(a){cd(a)}function V(a){if(a===0)return 0;a=v(a);if(!Object.prototype.hasOwnProperty.call(J,a))return 0;V.ret&&wc(V.ret);V.ret=ja(J[a]);return V.ret}function zb(a){return a}function Ab(a){return Math.pow(2,a)}function Bb(a){return Ab(a)}function Cb(a){var b=Db,c=b.LLVM_SAVEDSTACKS[a];b.LLVM_SAVEDSTACKS.splice(a,1);Y(c)}function Db(){var a=Db;a.LLVM_SAVEDSTACKS||(a.LLVM_SAVEDSTACKS=[]);a.LLVM_SAVEDSTACKS.push(Z());return a.LLVM_SAVEDSTACKS.length-1}function Eb(){$("trap!")}function Fb(a,b,c){A.set(A.subarray(b,b+c),a)}function Gb(){return 0}function Hb(a){$("OOM")}function Ib(a){var b=65536;a=qa(a,b);b=y.byteLength;try{a=r.grow((a-b)/65536);if(a!==(-1|0)){y=r.buffer;return!0}else return!1}catch(a){return!1}}function Jb(a){var b=xb(),c=65536,d=2147483648-c;if(a>d)return!1;var e=16777216;b=Math.max(b,e);while(b<a)b<=536870912?b=qa(2*b,c):b=Math.min(qa((3*b+2147483648)/4,c),d);if(!Ib(b))return!1;ua();return!0}function Kb(a){return a%4===0&&(a%100!==0||a%400===0)}function Lb(a,b){var c=0;for(var d=0;d<=b;c+=a[d++]);return c}var Mb=[31,29,31,30,31,30,31,31,30,31,30,31],Nb=[31,28,31,30,31,30,31,31,30,31,30,31];function Ob(a,b){a=new Date(a.getTime());while(b>0){var c=Kb(a.getFullYear()),d=a.getMonth();c=(c?Mb:Nb)[d];if(b>c-a.getDate())b-=c-a.getDate()+1,a.setDate(1),d<11?a.setMonth(d+1):(a.setMonth(0),a.setFullYear(a.getFullYear()+1));else{a.setDate(a.getDate()+b);return a}}return a}function Pb(a,b,c,d){var e=B[d+40>>2];d={tm_sec:B[d>>2],tm_min:B[d+4>>2],tm_hour:B[d+8>>2],tm_mday:B[d+12>>2],tm_mon:B[d+16>>2],tm_year:B[d+20>>2],tm_wday:B[d+24>>2],tm_yday:B[d+28>>2],tm_isdst:B[d+32>>2],tm_gmtoff:B[d+36>>2],tm_zone:e?v(e):""};e=v(c);c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var f in c)e=e.replace(new RegExp(f,"g"),c[f]);var g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=["January","February","March","April","May","June","July","August","September","October","November","December"];function i(a,b,c){a=typeof a==="number"?a.toString():a||"";while(a.length<b)a=c[0]+a;return a}function j(a,b){return i(a,b,"0")}function k(a,b){function c(a){return a<0?-1:a>0?1:0}var d;(d=c(a.getFullYear()-b.getFullYear()))===0&&((d=c(a.getMonth()-b.getMonth()))===0&&(d=c(a.getDate()-b.getDate())));return d}function l(a){switch(a.getDay()){case 0:return new Date(a.getFullYear()-1,11,29);case 1:return a;case 2:return new Date(a.getFullYear(),0,3);case 3:return new Date(a.getFullYear(),0,2);case 4:return new Date(a.getFullYear(),0,1);case 5:return new Date(a.getFullYear()-1,11,31);case 6:return new Date(a.getFullYear()-1,11,30)}}function m(a){a=Ob(new Date(a.tm_year+1900,0,1),a.tm_yday);var b=new Date(a.getFullYear(),0,4),c=new Date(a.getFullYear()+1,0,4);b=l(b);c=l(c);if(k(b,a)<=0)if(k(c,a)<=0)return a.getFullYear()+1;else return a.getFullYear();else return a.getFullYear()-1}c={"%a":function(a){return g[a.tm_wday].substring(0,3)},"%A":function(a){return g[a.tm_wday]},"%b":function(a){return h[a.tm_mon].substring(0,3)},"%B":function(a){return h[a.tm_mon]},"%C":function(a){a=a.tm_year+1900;return j(a/100|0,2)},"%d":function(a){return j(a.tm_mday,2)},"%e":function(a){return i(a.tm_mday,2," ")},"%g":function(a){return m(a).toString().substring(2)},"%G":function(a){return m(a)},"%H":function(a){return j(a.tm_hour,2)},"%I":function(a){a=a.tm_hour;a==0?a=12:a>12&&(a-=12);return j(a,2)},"%j":function(a){return j(a.tm_mday+Lb(Kb(a.tm_year+1900)?Mb:Nb,a.tm_mon-1),3)},"%m":function(a){return j(a.tm_mon+1,2)},"%M":function(a){return j(a.tm_min,2)},"%n":function(){return"\n"},"%p":function(a){if(a.tm_hour>=0&&a.tm_hour<12)return"AM";else return"PM"},"%S":function(a){return j(a.tm_sec,2)},"%t":function(){return"\t"},"%u":function(a){return a.tm_wday||7},"%U":function(a){var b=new Date(a.tm_year+1900,0,1),c=b.getDay()===0?b:Ob(b,7-b.getDay());a=new Date(a.tm_year+1900,a.tm_mon,a.tm_mday);if(k(c,a)<0){var d=Lb(Kb(a.getFullYear())?Mb:Nb,a.getMonth()-1)-31,e=31-c.getDate();e=e+d+a.getDate();return j(Math.ceil(e/7),2)}return k(c,b)===0?"01":"00"},"%V":function(a){var b=new Date(a.tm_year+1900,0,4),c=new Date(a.tm_year+1901,0,4);b=l(b);c=l(c);var d=Ob(new Date(a.tm_year+1900,0,1),a.tm_yday);if(k(d,b)<0)return"53";if(k(c,d)<=0)return"01";b.getFullYear()<a.tm_year+1900?c=a.tm_yday+32-b.getDate():c=a.tm_yday+1-b.getDate();return j(Math.ceil(c/7),2)},"%w":function(a){return a.tm_wday},"%W":function(a){var b=new Date(a.tm_year,0,1),c=b.getDay()===1?b:Ob(b,b.getDay()===0?1:7-b.getDay()+1);a=new Date(a.tm_year+1900,a.tm_mon,a.tm_mday);if(k(c,a)<0){var d=Lb(Kb(a.getFullYear())?Mb:Nb,a.getMonth()-1)-31,e=31-c.getDate();e=e+d+a.getDate();return j(Math.ceil(e/7),2)}return k(c,b)===0?"01":"00"},"%y":function(a){return(a.tm_year+1900).toString().substring(2)},"%Y":function(a){return a.tm_year+1900},"%z":function(a){a=a.tm_gmtoff;var b=a>=0;a=Math.abs(a)/60;a=a/60*100+a%60;return(b?"+":"-")+String("0000"+a).slice(-4)},"%Z":function(a){return a.tm_zone},"%%":function(){return"%"}};for(var f in c)e.indexOf(f)>=0&&(e=e.replace(new RegExp(f,"g"),c[f](d)));c=Rb(e,!1);if(c.length>b)return 0;ka(c,a);return c.length-1}function Qb(a,b,c,d){return Pb(a,b,c,d)}T.staticInit();typeof dateNow!=="undefined"?ub=dateNow:typeof performance==="object"&&performance&&typeof performance.now==="function"?ub=function(){return performance.now()}:ub=Date.now;function Rb(a,b,c){c=c>0?c:x(a)+1;c=new Array(c);a=w(a,c,0,c.length);b&&(c.length=a);return c}function Sb(a,b,c,d){var e=Z();try{return zc(a,b,c,d)}catch(a){Y(e);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function Tb(a,b,c,d){var e=Z();try{return Ac(a,b,c,d)}catch(a){Y(e);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function Ub(a){var b=Z();try{return Bc(a)}catch(a){Y(b);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function Vb(a,b){var c=Z();try{return Cc(a,b)}catch(a){Y(c);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function Wb(a,b,c){var d=Z();try{return Dc(a,b,c)}catch(a){Y(d);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function Xb(a,b,c,d){var e=Z();try{return Ec(a,b,c,d)}catch(a){Y(e);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function Yb(a,b,c,d){var e=Z();try{return Fc(a,b,c,d)}catch(a){Y(e);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function Zb(a,b,c,d,e){var f=Z();try{return Gc(a,b,c,d,e)}catch(a){Y(f);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function $b(a,b,c,d,e,f){var g=Z();try{return Hc(a,b,c,d,e,f)}catch(a){Y(g);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function ac(a,b,c,d,e,f,g){var h=Z();try{return Ic(a,b,c,d,e,f,g)}catch(a){Y(h);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function bc(a,b,c,d,e,f,g,h){var i=Z();try{return Jc(a,b,c,d,e,f,g,h)}catch(a){Y(i);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function cc(a,b,c,d,e,f,g,h,i){var j=Z();try{return Kc(a,b,c,d,e,f,g,h,i)}catch(a){Y(j);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function dc(a,b,c,d,e,f,g,h,i,j,k){var l=Z();try{return Lc(a,b,c,d,e,f,g,h,i,j,k)}catch(a){Y(l);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function ec(a,b,c,d,e,f,g,h,i,j,k,l){var m=Z();try{return Mc(a,b,c,d,e,f,g,h,i,j,k,l)}catch(a){Y(m);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function fc(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=Z();try{return Nc(a,b,c,d,e,f,g,h,i,j,k,l,m)}catch(a){Y(n);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function gc(a,b,c,d,e){var f=Z();try{return Oc(a,b,c,d,e)}catch(a){Y(f);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function hc(a){var b=Z();try{Pc(a)}catch(a){Y(b);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function ic(a,b){var c=Z();try{Qc(a,b)}catch(a){Y(c);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function jc(a,b,c){var d=Z();try{Rc(a,b,c)}catch(a){Y(d);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function kc(a,b,c,d,e,f,g,h){var i=Z();try{Sc(a,b,c,d,e,f,g,h)}catch(a){Y(i);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function lc(a,b,c,d){var e=Z();try{Tc(a,b,c,d)}catch(a){Y(e);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function mc(a,b,c,d,e){var f=Z();try{Uc(a,b,c,d,e)}catch(a){Y(f);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function nc(a,b,c,d,e,f){var g=Z();try{Vc(a,b,c,d,e,f)}catch(a){Y(g);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function oc(a,b,c,d,e,f,g){var h=Z();try{Wc(a,b,c,d,e,f,g)}catch(a){Y(h);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function pc(a,b,c,d,e,f,g){var h=Z();try{Xc(a,b,c,d,e,f,g)}catch(a){Y(h);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function qc(a,b,c,d,e,f,g,h){var i=Z();try{Yc(a,b,c,d,e,f,g,h)}catch(a){Y(i);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function rc(a,b,c,d,e,f,g,h,i,j,k){var l=Z();try{Zc(a,b,c,d,e,f,g,h,i,j,k)}catch(a){Y(l);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}function sc(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,aa){var p=Z();try{$c(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,aa)}catch(a){Y(p);if(a!==a+0&&a!=="longjmp")throw a;X(1,0)}}D={};i={s:$,Y:q,b:m,L:Sb,T:Tb,t:Ub,f:Vb,i:Wb,G:Xb,r:Yb,q:Zb,N:$b,B:ac,W:bc,V:cc,w:dc,M:ec,F:fc,X:gc,l:hc,m:ic,e:jc,I:kc,g:lc,k:mc,j:nc,U:oc,K:pc,y:qc,E:rc,J:sc,ma:Va,n:Wa,u:$a,v:cb,c:fb,h:gb,p:ab,la:hb,S:ib,o:jb,ka:kb,ja:lb,ia:mb,d:db,R:M,ha:nb,Q:ob,ga:pb,fa:rb,P:sb,O:tb,ea:wb,da:xb,ca:Fb,ba:Jb,aa:yb,H:V,C:zb,D:Bb,A:Cb,z:Db,x:Eb,$:Gb,_:Qb,Z:Hb,a:C};E=f.asm(D,i,y);f.asm=E;var W=f.__ZSt18uncaught_exceptionv=function(){return f.asm.na.apply(null,arguments)},tc=f.___cxa_can_catch=function(){return f.asm.oa.apply(null,arguments)},uc=f.___cxa_is_pointer_type=function(){return f.asm.pa.apply(null,arguments)},vc=f.___emscripten_environ_constructor=function(){return f.asm.qa.apply(null,arguments)};f.___errno_location=function(){return f.asm.ra.apply(null,arguments)};var wc=f._free=function(){return f.asm.sa.apply(null,arguments)},xc=f._malloc=function(){return f.asm.ta.apply(null,arguments)};f._resizeJpeg=function(){return f.asm.ua.apply(null,arguments)};var X=f._setThrew=function(){return f.asm.va.apply(null,arguments)},yc=f.stackAlloc=function(){return f.asm.Ya.apply(null,arguments)},Y=f.stackRestore=function(){return f.asm.Za.apply(null,arguments)},Z=f.stackSave=function(){return f.asm._a.apply(null,arguments)},zc=f.dynCall_diii=function(){return f.asm.wa.apply(null,arguments)},Ac=f.dynCall_fiii=function(){return f.asm.xa.apply(null,arguments)},Bc=f.dynCall_i=function(){return f.asm.ya.apply(null,arguments)},Cc=f.dynCall_ii=function(){return f.asm.za.apply(null,arguments)},Dc=f.dynCall_iii=function(){return f.asm.Aa.apply(null,arguments)},Ec=f.dynCall_iiif=function(){return f.asm.Ba.apply(null,arguments)},Fc=f.dynCall_iiii=function(){return f.asm.Ca.apply(null,arguments)},Gc=f.dynCall_iiiii=function(){return f.asm.Da.apply(null,arguments)},Hc=f.dynCall_iiiiii=function(){return f.asm.Ea.apply(null,arguments)},Ic=f.dynCall_iiiiiii=function(){return f.asm.Fa.apply(null,arguments)},Jc=f.dynCall_iiiiiiii=function(){return f.asm.Ga.apply(null,arguments)},Kc=f.dynCall_iiiiiiiii=function(){return f.asm.Ha.apply(null,arguments)},Lc=f.dynCall_iiiiiiiiiii=function(){return f.asm.Ia.apply(null,arguments)},Mc=f.dynCall_iiiiiiiiiiii=function(){return f.asm.Ja.apply(null,arguments)},Nc=f.dynCall_iiiiiiiiiiiii=function(){return f.asm.Ka.apply(null,arguments)},Oc=f.dynCall_jiiii=function(){return f.asm.La.apply(null,arguments)},Pc=f.dynCall_v=function(){return f.asm.Ma.apply(null,arguments)},Qc=f.dynCall_vi=function(){return f.asm.Na.apply(null,arguments)},Rc=f.dynCall_vii=function(){return f.asm.Oa.apply(null,arguments)},Sc=f.dynCall_viifiiii=function(){return f.asm.Pa.apply(null,arguments)},Tc=f.dynCall_viii=function(){return f.asm.Qa.apply(null,arguments)},Uc=f.dynCall_viiii=function(){return f.asm.Ra.apply(null,arguments)},Vc=f.dynCall_viiiii=function(){return f.asm.Sa.apply(null,arguments)},Wc=f.dynCall_viiiiif=function(){return f.asm.Ta.apply(null,arguments)},Xc=f.dynCall_viiiiii=function(){return f.asm.Ua.apply(null,arguments)},Yc=f.dynCall_viiiiiii=function(){return f.asm.Va.apply(null,arguments)},Zc=f.dynCall_viiiiiiiiii=function(){return f.asm.Wa.apply(null,arguments)},$c=f.dynCall_viiiiiiiiiiiiiii=function(){return f.asm.Xa.apply(null,arguments)};f.asm=E;f.ccall=ea;f.cwrap=fa;f.getMemory=ga;f.then=function(a){if(f.calledRun)a(f);else{var b=f.onRuntimeInitialized;f.onRuntimeInitialized=function(){b&&b(),a(f)}}return f};function ad(a){this.name="ExitStatus",this.message="Program terminated with exit("+a+")",this.status=a}ad.prototype=new Error();ad.prototype.constructor=ad;G=function a(){f.calledRun||bd(),f.calledRun||(G=a)};function bd(a){a||f.arguments;if(F>0)return;Ba();if(F>0)return;if(f.calledRun)return;function b(){if(f.calledRun)return;f.calledRun=!0;if(s)return;Ca();Da();f.onRuntimeInitialized&&f.onRuntimeInitialized();Fa()}f.setStatus?(f.setStatus("Running..."),setTimeout(function(){setTimeout(function(){f.setStatus("")},1),b()},1)):b()}f.run=bd;function cd(a,b){if(b&&f.noExitRuntime&&a===0)return;f.noExitRuntime||(s=!0,a,Ea(),f.onExit&&f.onExit(a));f.quit(a,new ad(a))}function $(a){f.onAbort&&f.onAbort(a);a!==void 0?(n(a),o(a),a='"'+a+'"'):a="";s=!0;throw"abort("+a+"). Build with -s ASSERTIONS=1 for more info."}f.abort=$;if(f.preInit){typeof f.preInit=="function"&&(f.preInit=[f.preInit]);while(f.preInit.length>0)f.preInit.pop()()}f.noExitRuntime=!0;bd();return d}}();typeof f==="object"&&typeof e==="object"?e.exports=h:typeof define==="function"&&define.amd?define([],function(){return h}):typeof f==="object"&&(f.SpectrumWasm=h)}),null);
__d("SpectrumImageResizer",["invariant","Promise","BlobFactory","FBLogger","SpectrumWasm","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h=2048,i=2048,j=85,k=null,l=null;a=function(){a.isSupported=function(){try{if(typeof WebAssembly==="object"&&typeof WebAssembly.instantiate==="function"){var a=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(a instanceof WebAssembly.Module)return new WebAssembly.Instance(a)instanceof WebAssembly.Instance}}catch(a){b("FBLogger")("spectrum").catching(a).mustfix("Instantiating empty WebAssembly module threw an error")}return!1};a.getSingleton=function(){k||(k=new a());return k};function a(){this.$1=h,this.$2=i,this.$3=j,l=b("SpectrumWasm")()}var c=a.prototype;c.setEncodeQuality=function(a){this.$3=a;return this};c.setMaxWidth=function(a){this.$2=a;return this};c.setMaxHeight=function(a){this.$1=a;return this};c.resizeBlob=function(a,b){return this.$4(a,this.$2,this.$1,this.$3,b)};c.resize360Blob=function(a,b,c){var d,e;c===void 0||c===null?(d=this.$2*4,e=this.$1*4):(d=c,e=c);return this.$4(a,d,e,this.$3,b)};c.$4=function(a,c,d,e,f){var h=new FileReader();h.onload=function(h){var i=new Uint8Array(this.result);i.length>0||g(0,18539);function j(a){return new(b("Promise"))(function(b,c){var d=new Image();d.onload=function(){URL.revokeObjectURL(d.src),b({width:d.width,height:d.height})};d.onerror=function(a){URL.revokeObjectURL(d.src),c(a)};d.src=URL.createObjectURL(a)})}return j(a).then(function(a){l!=null||g(0,18573);return l.then(function(g){var h=g.cwrap("resizeJpeg","number",["number","number","number","number","number","number"]);function k(a){var b=g.getMemory(a.length);g.HEAP8.set(a,b);return b}var l=0,m=0;try{var n=function(a,b){var c=new Int8Array(b);c.set(g.HEAP8.subarray(a,a+b));return c};l=g.getMemory(i.length);m=k(i);k=h(m,i.length,l,c,d,e);h=n(l,k);var o=b("BlobFactory").getBlob([h],{type:"image/jpeg",done:!0});b("promiseDone")(j(o).then(function(b){f(null,o,!1,a.width,a.height,b.width,b.height)}))}finally{m!==0&&g._free(m),l!==0&&g._free(l)}})})["catch"](function(a){f(a,null,!0,null,null,null,null)})};h.readAsArrayBuffer(a);return this};return a}();e.exports=a}),null);
__d("FBSphericalMetadataTags",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SPHERICAL:"FBSpherical:Spherical",INITIAL_VERTICAL_FOV_DEGREES:"FBSpherical:InitialVerticalFOVDegrees",GUIDE:"FBSpherical:Guide",HOTSPOT:"FBSpherical:HotspotMetadata",USED_360_DIRECTOR:"FBSpherical:Used360Director"})}),null);
__d("GSphericalMetadataTags",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SPHERICAL:"GSpherical:Spherical",INITIAL_VIEW_HEADING_DEGREES:"GSpherical:InitialViewHeadingDegrees",INITIAL_VIEW_PITCH_DEGREES:"GSpherical:InitialViewPitchDegrees",PROJECTION_TYPE:"GSpherical:ProjectionType",STEREO_MODE:"GSpherical:StereoMode",STITCHED:"GSpherical:Stitched",STITCHING_SOFTWARE:"GSpherical:StitchingSoftware",CROPPED_AREA_IMAGE_WIDTH_PIXELS:"GSphercal:CroppedAreaImageWidthPixels",CROPPED_AREA_IMAGE_HEIGHT_PIXELS:"GSphercal:CroppedAreaImageHeightPixels",CROPPED_AREA_LEFT_PIXELS:"GSphercal:CroppedAreaLeftPixels",CROPPED_AREA_TOP_PIXELS:"GSphercal:CroppedAreaTopPixels",FULL_PANO_WIDTH_PIXELS:"GSphercal:FullPanoWidthPixels",FULL_PANO_HEIGHT_PIXELS:"GSphercal:FullPanoHeightPixels"})}),null);
__d("SphericalVideoMetadataTags",["FBSphericalMetadataTags","GSphericalMetadataTags"],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({GSPHERICAL:b("GSphericalMetadataTags"),FBSPHERICAL:b("FBSphericalMetadataTags")});e.exports=a}),null);
__d("VideoUploadSphericalLogger",["Banzai"],(function(a,b,c,d,e,f){var g=3e3;a=function(){"use strict";function a(){this.$1={},this.$2=!1,this.$3=0}var c=a.prototype;c.log=function(){this.$2?this.$4():this.$5()};c.$5=function(){b("Banzai").post("spherical_video_composer_upload",babelHelpers["extends"]({},this.$1))};c.$4=function(){var a=Date.now();a-this.$3>g&&(this.$3=a,this.$5())};c.setDirectorsCutEnabled=function(a){this.$1.directors_cut_enabled=a;return this};c.setFieldOfView=function(a){this.$1.field_of_view=a;return this};c.setFileExtension=function(a){this.$1.file_extension=a;return this};c.setHasSphericalMetadata=function(a){this.$1.has_spherical_metadata=a;return this};c.setPitchDegrees=function(a){this.$1.pitch_degrees=a;return this};c.setTargetID=function(a){this.$1.target_id=a;return this};c.setVideoID=function(a){this.$1.video_id=a;return this};c.setUserAction=function(a){this.$1.user_action=a;a==="drag_video_preview"||a==="scroll_video_preview"?this.$2=!0:this.$2=!1;return this};c.setVideoPreviewPosition=function(a){this.$1.video_preview_position=a;return this};c.setYawDegrees=function(a){this.$1.yaw_degrees=a;return this};c.setIsRedesign=function(a){this.$1.is_redesign=a;return this};c.setFinalGuideEnabled=function(a){this.$1.final_guide_enabled=a;return this};c.setFinalNumGuidePoints=function(a){this.$1.final_num_guide_points=a;return this};c.setIsNuxTest=function(a){this.$1.is_nux_test=a;return this};return a}();e.exports=new a()}),null);
__d("VideoUploadFileValidator",["errorCode","fbt","requireCond","cr:909496","cr:909497","React"],(function(a,b,c,d,e,f,g,h){var i=b("React"),j=[1363019,1363020,1363021,1363022,1363023,1363024,1363025,1363026,1363027,1363030,1363031,1363032,1363033,1363038,1363039,1363040,1363048],k=["VIDEO__INVALID_GUIDE_DATA"];a=function(){"use strict";function a(a){this.$1=a}var c=a.prototype;c.validate=function(a,b){return this.$2(a)&&this.$3(a)&&this.$4(a.getExtension()==="gif",b)};c.getValidationErrorMessage=function(a,b){return this.$5(a)||this.$6(a)||this.$7(a.getExtension()==="gif",b)};a.canReplaceVideoForError=function(a){if(!a)return!0;if(k.indexOf(a)>-1)return!1;return j.indexOf(a)>-1?!0:!1};c.$2=function(a){a=this.$5(a);if(a){b("cr:909496")!==null&&b("cr:909496").show(a.summary,a.description);return!1}else return!0};c.$5=function(a){if(this.$1.extensions[a.getExtension()])return;a="http://www.facebook.com/help/?faq=218673814818907#What-formats-of-video-files-can-I-upload?";a=i.jsx(b("cr:909497"),{target:"_blank",href:a,children:h._("zalecanych format\u00f3w")});return{summary:h._("Nieobs\u0142ugiwany format pliku"),description:h._("Wybrany plik ma nieobs\u0142ugiwany format. U\u017cyj jednego z naszych {link} dla plik\u00f3w film\u00f3w.",[h._param("link",a)])}};c.$3=function(a){a=this.$6(a);if(a){b("cr:909496")!==null&&b("cr:909496").show(a.summary,a.description);return!1}else return!0};c.$6=function(a){var b;if(a.getSize()===null)return;a.getSize()<this.$1.minSize&&(b=this.$8());a.getSize()>this.$1.maxSize&&(b=this.$9());return b};c.$8=function(){var a=Math.round(this.$1.minSize/1024);return{summary:h._("Za ma\u0142y plik wideo"),description:h._("Przesy\u0142any plik filmu jest zbyt ma\u0142y. Minimalny rozmiar pliku filmu to {min-size} KB. Spr\u00f3buj ponownie z wi\u0119kszym plikiem.",[h._param("min-size",a)])}};c.$9=function(){var a=Math.floor(this.$1.maxSize/1024/1024);return{summary:h._("Za du\u017cy plik wideo"),description:h._("Przesy\u0142any plik jest zbyt du\u017cy. Maksymalny rozmiar pliku filmu to {max-size} MB. Spr\u00f3buj ponownie z mniejszym plikiem.",[h._param("max-size",a)])}};c.$4=function(a,c){a=this.$7(a,c);if(a){b("cr:909496")!==null&&b("cr:909496").show(a.summary,a.description);return!1}else return!0};c.$7=function(a,b){var c;if(!b)return;var d=b.format.duration;d&&(d>this.$1.maxLength&&(c=this.$10()),d<this.$1.minLength&&!a&&(c=this.$11()));if(!b.streams||!b.streams.primaryVideo)return;d=b.streams.primaryVideo.width;a=b.streams.primaryVideo.height;var e=0,f=0;b.videoPlayerData!==null&&(e=b.videoPlayerData.height,f=b.videoPlayerData.width);this.$1.acceptDimensionsFromPlayer&&f!==0&&e!==0&&(d=f,a=e);!b.streams.primaryVideo&&b.streams.primaryAudio&&(c=this.$12());d<this.$1.minWidth&&(c=this.$13());a<this.$1.minHeight&&(c=this.$14());f=d/a;this.$1.require16to9AspectRatio&&((f>2||f<1.6)&&(c=this.$15()));this.$1.minAspectRatio&&(f<this.$1.minAspectRatio&&(c=this.$16()));this.$1.maxAspectRatio&&(f>this.$1.maxAspectRatio&&(c=this.$17()));return c};c.$10=function(){if(this.$1.source==="profile_video")return{summary:h._("Zbyt d\u0142ugi film profilowy"),description:h._("Maksymalna d\u0142ugo\u015b\u0107 to {max-length} s. Prze\u015blij kr\u00f3tszy film.",[h._param("max-length",this.$1.maxLength)])};else return{summary:h._("Zbyt d\u0142ugi czas trwania filmu"),description:h._("Czas trwania przesy\u0142anego filmu jest zbyt d\u0142ugi. Maksymalny czas trwania filmu wynosi {max-length} min. Prze\u015blij kr\u00f3tszy film.",[h._param("max-length",Math.round(this.$1.maxLength/60))])}};c.$11=function(){return{summary:h._("Zbyt kr\u00f3tki plik filmu"),description:h._({"second":"Przesy\u0142any film jest zbyt kr\u00f3tki. Minimalna d\u0142ugo\u015b\u0107 filmu to {min-length} s. Prze\u015blij d\u0142u\u017cszy film.","seconds":"Przesy\u0142any film jest zbyt kr\u00f3tki. Minimalna d\u0142ugo\u015b\u0107 filmu to {min-length} s. Prze\u015blij d\u0142u\u017cszy film."},[h._param("min-length",this.$1.minLength),h._enum(this.$1.minLength===1?"second":"seconds",{second:"second",seconds:"seconds"})])}};c.$12=function(){var a="http://www.facebook.com/help/?faq=218673814818907#What-formats-of-video-files-can-I-upload?";a=i.jsx(b("cr:909497"),{href:a,children:h._("film w obs\u0142ugiwanym formacie")});return{summary:h._("Nie wykryto filmu"),description:h._("Pr\u00f3bujesz przes\u0142a\u0107 plik, kt\u00f3ry nie jest filmem. Spr\u00f3buj przes\u0142a\u0107 {supported-video-format link}.",[h._param("supported-video-format link",a)])}};c.$13=function(){return{summary:h._("Zbyt ma\u0142a szeroko\u015b\u0107 filmu"),description:h._("Szeroko\u015b\u0107 przesy\u0142anego pliku jest zbyt ma\u0142a. Minimalna szeroko\u015b\u0107 filmu to {min-width}. Prze\u015blij szerszy film.",[h._param("min-width",this.$1.minWidth)])}};c.$15=function(){return{summary:h._("Problem podczas przesy\u0142ania filmu"),description:h._("Najlepiej wygl\u0105daj\u0105 filmy o proporcjach 16:9. Dokonaj edycji filmu i prze\u015blij ponownie.")}};c.$14=function(){return{summary:h._("Zbyt ma\u0142a wysoko\u015b\u0107 filmu"),description:h._("Wysoko\u015b\u0107 przesy\u0142anego pliku jest zbyt ma\u0142a. Minimalna wysoko\u015b\u0107 filmu to {min-height}. Prze\u015blij wy\u017cszy film.",[h._param("min-height",this.$1.minHeight)])}};c.$17=function(){return{summary:h._("Film jest zbyt szeroki"),description:h._("Wybrany przez Ciebie film jest zbyt szeroki. Wsp\u00f3\u0142czynnik proporcji filmu musi by\u0107 zawarty w zakresie od {max_aspect_ratio} do {min_aspect_ratio}. Nagraj i prze\u015blij wy\u017cszy film.",[h._param("max_aspect_ratio",this.$1.maxAspectRatio+":1"),h._param("min_aspect_ratio",this.$1.minAspectRatio+":1")])}};c.$16=function(){return{summary:h._("Film jest zbyt wysoki"),description:h._("Wybrany przez Ciebie film jest zbyt wysoki. Wsp\u00f3\u0142czynnik proporcji filmu musi by\u0107 zawarty w zakresie od {max_aspect_ratio} do {min_aspect_ratio}. Nagraj i prze\u015blij w\u0119\u017cszy film.",[h._param("max_aspect_ratio",this.$1.maxAspectRatio+":1"),h._param("min_aspect_ratio",this.$1.minAspectRatio+":1")])}};return a}();e.exports=a}),null);
__d("VideoStereoFormat",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MONO:"mono",LEFT_RIGHT:"left-right",TOP_BOTTOM:"top-bottom"})}),null);
__d("VideoSphericalMetadataUtil",["SphericalVideoMetadataTags","VideoProjection","VideoStereoFormat"],(function(a,b,c,d,e,f){"use strict";a={parseXMLToDocument:function(a){if(!a)return null;a=a.replace(/\0/g,"");if(window.DOMParser){var b=new DOMParser();b=b.parseFromString(a,"text/xml")}else b=new window.ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a);return b},stringToProjectionType:function(a){if(Object.values(b("VideoProjection")).includes(a))return a;else return null},stringToStereoMode:function(a){if(Object.values(b("VideoStereoFormat")).includes(a))return a;else return null},getUnsupportedGSphericalTagsXML:function(a){a=a.getElementsByTagNameNS("*","*");var c=null;for(var d=0;d<a.length;d++){var e=a[d],f=e.nodeName,g=e.parentElement;if(f!=="parsererror"&&g&&g.nodeName!=="parsererror"&&Object.values(b("SphericalVideoMetadataTags").GSPHERICAL).indexOf(f)<0&&Object.values(b("SphericalVideoMetadataTags").GSPHERICAL).indexOf(g.nodeName)<0){c||(c="");g=e.outerHTML;c+="<"+f+g.slice(f.length+1,-(f.length+1))+f+">"}}return c},isGoogleVR180:function(a,b,c,d,e){if(null!==b&&null!==c&&null!==d&&null!==e&&a.projectionType==="equirectangular"&&(a.stereoMode==="left-right"||a.stereoMode==="top-bottom")){a=parseInt(b,10);b=parseInt(c,10);c=parseInt(d,10);d=parseInt(e,10);if(Math.abs(a-c/2)<=1&&Math.abs(b-d)<=1)return!0}return!1},arrayBufferToFile:function(a,b,c){return new File([a],b,{type:c})},stringToArrayBuffer:function(a){var b=new ArrayBuffer(a.length),c=new DataView(b);for(var d=0;d<a.length;d++)c.setUint8(d,a.charCodeAt(d));return b},bufferToFile:function(a,b,c){a=a.buffer;return this.arrayBufferToFile(a,b,c)},uuidArrayEquals:function(a,b){if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}};e.exports=a}),null);
__d("ISOVideoBoxConstants",[],(function(a,b,c,d,e,f){"use strict";a={BOX_BASE_SIZE:8,GSPHERICAL_UUID:[255,204,130,99,248,85,74,147,136,20,88,122,2,82,31,221],FBSPHERICAL_UUID:[174,36,178,77,60,143,79,24,138,123,224,9,193,56,53,193]};e.exports=a}),null);
__d("checkForSphericalTag",["VideoSphericalMetadataUtil"],(function(a,b,c,d,e,f){"use strict";function a(a){a=b("VideoSphericalMetadataUtil").parseXMLToDocument(a);if(!a)return!1;a=a.getElementsByTagNameNS("*","Spherical");if(a.length===0)return!1;a=a[0];a=a.childNodes[0].nodeValue;return a.toLowerCase()==="true"}e.exports=a}),null);
__d("getVideo64BitAtomLength",["Int64"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e){var f=a.getUint32(c+e+d);a=a.getUint32(c+d+e+e);return new(b("Int64"))(a,f).toNumber()}e.exports=a}),null);
__d("VideoUploadMetadataParser",["regeneratorRuntime","Promise","Bootloader","ISOVideoBoxConstants","VideoSphericalMetadataUtil","VideoUploadFeatureDetector","VideoUploadSphericalLogger","checkForSphericalTag","fileSlice","getVideo64BitAtomLength","gkx","nullthrows","promiseDone"],(function(a,b,c,d,e,f){var g=4,h=4,i=5242880,j=24,k=88,l=20,m=16,n=4,o=84,p=20,q=62,r=4,s=12,t=12,u=16,v=16,w={0:36,1:52,2:72},x=1,y=1,z=4,A=1,B=1,C=4,D=4,E=1e3,F=16,G=32,H=34;c=function(){"use strict";function c(a,c,d){this.$1=a,this.$2=c,this.$3=d,this.$4=b("gkx")("1495127")}var d=c.prototype;d.getHandler=function(){return this.$2};d.parse=function(){if(!b("VideoUploadFeatureDetector").supportsFileReading()){this.$2(null);return null}switch(this.$1.getExtension()){case"mp4":case"mov":case"m4v":case"3gp":case"3g2":b("VideoUploadSphericalLogger").setFileExtension(this.$1.getExtension());break;case"mkv":if(b("gkx")("816873")){b("VideoUploadSphericalLogger").setFileExtension(this.$1.getExtension());break}default:this.$2(null);return null}return this.$5()};d.$5=function(){var a=this,c,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:c=this.$6();d=this.$7();return e.abrupt("return",new(b("Promise"))(function(e,f){try{b("promiseDone")(b("Promise").all([c,d]).then(function(b){var c=b[0];if(c.completed){b=b[1];c.videoPlayerData=b;a.$2(c)}e(c)},function(b){a.$2(null),f(b)}))}catch(b){a.$2(null),f(b)}}));case 3:case"end":return e.stop()}},null,this)};d.$6=function(){var a=this,c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.t0=this.$1.getExtension();d.next=d.t0==="mp4"?3:d.t0==="mov"?3:d.t0==="m4v"?3:d.t0==="3gp"?3:d.t0==="3g2"?3:d.t0==="mkv"?5:8;break;case 3:c=this.$8(0,Math.min(i,this.$1.getSize()||0),null);return d.abrupt("break",9);case 5:d.next=7;return b("regeneratorRuntime").awrap(new(b("Promise"))(function(d,e){b("Bootloader").loadModules(["VideoUploadMetadataMKVParser"],function(a){a=new a(this.$1);c=a.parse();d()}.bind(a),"VideoUploadMetadataParser")}));case 7:return d.abrupt("break",9);case 8:throw new Error("Unrecognized file extension in _parseImpl");case 9:return d.abrupt("return",b("nullthrows")(c));case 10:case"end":return d.stop()}},null,this)};d.$8=function(a,c,d){var e=this,f=new FileReader(),g=new(b("Promise"))(function(g,h){f.onload=function(j){var k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:m.prev=0;if(f.result instanceof ArrayBuffer){m.next=3;break}throw new Error("reader.result is something other than ArrayBuffer");case 3:k=e.$9(new DataView(f.result),0,c-a,a,d);if(!k.completed){m.next=10;break}j=e.$10(k);j.completed=!0;g(j);m.next=14;break;case 10:m.next=12;return b("regeneratorRuntime").awrap(e.$8(a+k.nextOffset,Math.min(e.$1.getSize()||0,a+k.nextOffset+i),k));case 12:l=m.sent,g(l);case 14:m.next=19;break;case 16:m.prev=16,m.t0=m["catch"](0),h(m.t0);case 19:case"end":return m.stop()}},null,this,[[0,16]])};var j=e.$1.getFile();f.readAsArrayBuffer(b("fileSlice").call(j,a,c))});return g};d.$7=function(){if(!this.$3||!a.URL||!a.URL.createObjectURL)return null;var c=this.$1.getFile(),d=document.createElement("video"),e=new(b("Promise"))(function(a,b){var c=window.setTimeout(function(){window.clearTimeout(c),b("Video onloadedmetadata timed out")},E)}),f=new(b("Promise"))(function(b,e){d.onloadedmetadata=function(){try{var a={width:d.videoWidth,height:d.videoHeight};b(a)}catch(a){e(a)}};try{d.src=a.URL.createObjectURL(c)}catch(a){e(a)}});return b("Promise").race([f,e])};d.$11=function(a,b,c){var d=[];for(var e=0;e<c;e++)d.push(String.fromCharCode(a.getUint8(b+e)));return d.join("")};d.$12=function(a,b,c){var d={version:null,ambisonic_type:null,ambisonic_order:null,ambisonic_channel_ordering:null,ambisonic_normalization:null,num_channels:null,channel_map:[]},e=0;d.version=a.getUint8(b+e);e=x;d.ambisonic_type=a.getUint8(b+e);e+=y;d.ambisonic_order=a.getUint32(b+e);e+=z;d.ambisonic_channel_ordering=a.getUint8(b+e);e+=A;d.ambisonic_normalization=a.getUint8(b+e);e+=B;d.num_channels=a.getUint32(b+e);e+=C;for(var f=0;f<d.num_channels;f++){d.channel_map.push(a.getUint32(b+e));e+=D;if(e>c)return null}return JSON.stringify(d)};d.$13=function(a,c,d,e){try{var f=h+g,i=b("ISOVideoBoxConstants").GSPHERICAL_UUID.length;if(f+i<d){var j=[];for(var k=0;k<i;k++)j.push(a.getUint8(c+f+k));k=b("VideoSphericalMetadataUtil").uuidArrayEquals(j,b("ISOVideoBoxConstants").GSPHERICAL_UUID);j=b("VideoSphericalMetadataUtil").uuidArrayEquals(j,b("ISOVideoBoxConstants").FBSPHERICAL_UUID);f+=i;if(k||j){i=this.$11(a,c+f,d-f);b("checkForSphericalTag")(i)&&(e.sphericalMetadata.spherical=!0,j?e.sphericalMetadata.FBSphericalMetadataXML=i:e.sphericalMetadata.sphericalMetadataXml=i)}}}catch(a){}};d.$9=function(a,c,d,e,f){f=f||{widths:[],heights:[],streamTypes:[],streamDurations:[],spherical:!1,sphericalMetadata:{sphericalMetadataXml:null,FBSphericalMetadataXML:null,fbSpatialAudioMetadataXml:null,ytSa3dMetadataJson:null},isParsingInMediaInformationAtom:!1,endOfMediaInformationAtomOffset:null,streamSampleCounts:[],samples:[]};var i=null;while(c<d){var x=a.getUint32(c),y=this.$11(a,c+g,h);x===1&&(x=b("getVideo64BitAtomLength")(a,c,h,g));if(c+x>d){f.completed=!1;f.nextOffset=c;x>d&&(f.nextOffset+=x);return f}f.isParsingInMediaInformationAtom&&c>=Number(f.endOfMediaInformationAtomOffset)&&(f.isParsingInMediaInformationAtom=!1,f.endOfMediaInformationAtomOffset=null);if(c+e===0&&y!=="ftyp")throw new Error("No ftyp atom");if(x===0)throw new Error("len is 0");var z=function(){var b=a.getUint32(c+l),d=a.getUint32(c+j);return d/b};switch(y){case"moov":case"trak":case"mdia":case"stbl":c+=g+h;break;case"mvhd":f.duration=z();c+=x;break;case"tkhd":y=a.getUint16(c+o);var A=a.getUint16(c+k);f.widths.push(y);f.heights.push(A);f.samples.push({descriptions:[]});i=a.getUint32(c+p);c+=x;break;case"hdlr":if(!f.isParsingInMediaInformationAtom){y=this.$11(a,c+m,n);switch(y){case"vide":y="video";break;case"soun":y="audio";break;case"subt":y="subtitle";break;default:y="data"}f.streamTypes.push(y)}c+=x;break;case"mdhd":f.streamDurations.push(z());c+=x;break;case"uuid":this.$13(a,c,x,f);c+=x;break;case"meta":A=t+s+r;y=this.$11(a,c+A,4);if(y!=="face"){c+=x;break}z=g+h+q;A=this.$11(a,c+z,x-z);A!==null&&((f.sphericalMetadata.fbSpatialAudioMetadataXml===null||f.sphericalMetadata.fbSpatialAudioMetadataXml===void 0)&&(f.sphericalMetadata.fbSpatialAudioMetadataXml="<fb360_spatial_audio>"),i?f.sphericalMetadata.fbSpatialAudioMetadataXml+='\n                <track id="'+i.toString()+'">\n                  '+A+"\n                </track>\n              ":f.sphericalMetadata.fbSpatialAudioMetadataXml+="\n                <spatial_audio_formatting>\n                  "+A+"\n                </spatial_audio_formatting>\n              ");c+=x;break;case"minf":y=this.$11(a,c+2*g+h,h);y==="smhd"||y==="vmhd"?(c+=g+h,f.isParsingInMediaInformationAtom=!0,f.endOfMediaInformationAtomOffset=c+x):(f.streamSampleCounts.push(null),c+=x);break;case"stsd":c+=u;break;case"avc1":if(this.$4&&f.samples.length>0){z=f.samples[f.samples.length-1];z.descriptions.push({width:a.getUint16(c+G),height:a.getUint16(c+H)})}c+=x;break;case"mp4a":case"sowt":case"raw ":case"twos":case"fl32":case"fl64":case"in24":case"in32":case"ulaw":case"alaw":case"lpcm":case"Opus":A=a.getUint16(c+v).toString();Object.prototype.hasOwnProperty.call(w,A)?c+=w[A]:c+=x;break;case"SA3D":y=this.$12(a,c+g+h,x);y!==null&&(f.sphericalMetadata.ytSa3dMetadataJson===null&&(f.sphericalMetadata.ytSa3dMetadataJson=y));c+=x;break;case"stsz":case"stz2":f.streamSampleCounts.push(a.getUint32(c+F));c+=x;break;default:c+=x}}f.completed=!0;f.sphericalMetadata.fbSpatialAudioMetadataXml&&(f.sphericalMetadata.fbSpatialAudioMetadataXml+="</fb360_spatial_audio>");return f};d.$10=function(a){var c={streams:{numAudioTracks:0},format:{},metadata:{}},d=a.widths.length,e=a.heights.length,f=a.streamTypes.length,g=a.streamDurations.length,h=a.streamSampleCounts.length,i=a.samples.length;if(d!==e||d!==f||d!==g||d!==h||d!==i)throw new Error("Number of parsed widths, heights, durations or sample counts for video file are mismatched.");for(var e=0;e<d;e++){var j={width:a.widths[e],height:a.heights[e],duration:a.streamDurations[e],type:a.streamTypes[e],sampleCount:a.streamSampleCounts[e]};if(j.type==="video"){this.$4&&a.samples[e].descriptions.forEach(function(a){a.width>j.width&&a.height>j.height&&(j.width=a.width,j.height=a.height)});f=j.width*j.height;g=c.streams.primaryVideo;(!g||g.width*g.height>f)&&(c.streams.primaryVideo=j)}else if(j.type==="audio"){h=c.streams.primaryAudio;(!h||h.duration<j.duration)&&(c.streams.primaryAudio=j);c.streams.numAudioTracks++}}c.format.duration=a.duration;c.format.isSpherical=a.sphericalMetadata.spherical;a.sphericalMetadata.spherical&&(c.metadata.sphericalMetadataXml=a.sphericalMetadata.sphericalMetadataXml,c.metadata.FBSphericalMetadataXML=a.sphericalMetadata.FBSphericalMetadataXML,c.metadata.fbSpatialAudioMetadataXml=a.sphericalMetadata.fbSpatialAudioMetadataXml,c.metadata.ytSa3dMetadataJson=a.sphericalMetadata.ytSa3dMetadataJson);b("VideoUploadSphericalLogger").setHasSphericalMetadata(a.sphericalMetadata.spherical);return c};return c}();e.exports=c}),null);
__d("Network",["mixInEventEmitter"],(function(a,b,c,d,e,f){var g=!0,h=a.navigator.connection,i={0:"unknown",1:"ethernet",2:"wifi",3:"2g",4:"3g"};function c(){return g}function d(a){if(a==g)return;g=a;l.emit(a?"online":"offline")}function f(){return h?h.bandwidth:g?Infinity:0}function j(){return h?h.metered:!1}function k(){var a=h?String(h.type):"0";return i[a]||a}var l={getBandwidth:f,getType:k,isMetered:j,isOnline:c,setOnline:d};b("mixInEventEmitter")(l,{online:!0,offline:!0});l=l;a.addEventListener?(a.addEventListener("online",d.bind(null,!0)),a.addEventListener("offline",d.bind(null,!1))):a.attachEvent&&(a.attachEvent("online",d.bind(null,!0)),a.attachEvent("offline",d.bind(null,!1)));e.exports=l}),null);
__d("submitForm",["DOM"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.querySelector('input[type="submit"]');c!=null?c.click():(c=b("DOM").create("input",{type:"submit",className:"hidden_elem"}),b("DOM").appendContent(a,c),c.click(),b("DOM").remove(c))};e.exports=a}),null);
__d("WebWorker",["invariant","requireCond","BlobFactory","Bootloader","EventListener","SubscriptionsHandler","URI","WebWorkerConfig","XHRRequest","areSameOrigin","cr:951783","emptyFunction","filterObject","getCrossOriginTransport","gkx","memoize","performanceNow","recoverableViolation"],(function(a,b,c,d,e,f,g){var h,i,j=a.URL||a.webkitURL,k={remove:b("emptyFunction")},l=function(){"use strict";function c(a){var c=this;this.$2=!1;this.$3=null;this.$4=a;this.__worker=null;this.$5=b("emptyFunction");this.$6=b("emptyFunction");this.$7=[];this.$8=[];this.$9=!1;this.$10=new(b("SubscriptionsHandler"))();this.$1=b("cr:951783")!==null?b("cr:951783")(function(){c.$9||c.terminate()}):k;b("gkx")("708253")&&setTimeout(function(){!c.$9&&!c.isCurrentState("terminated")&&b("recoverableViolation")("WebWorker (resource: "+a.name+") allowCrossPageTransitions must be true on Comet, or you must handle cleaning up your worker.","comet_infra")},1e3);this.$11("constructed")}var d=c.prototype;d.setMessageHandler=function(a){this.$5=a||b("emptyFunction");return this};d.setErrorHandler=function(a){this.$6=a||b("emptyFunction");return this};d.postMessage=function(a,b){this.isCurrentState("constructed")&&g(0,5977);this.isCurrentState("terminated")&&g(0,5978);if(this.isCurrentState("preparing")){this.$7.push(this.postMessage.bind(this,a,b));return this}a={type:"message",message:a};b?this.getInterfaceableWorker().postMessage(a,b):this.getInterfaceableWorker().postMessage(a);return this};d.$12=function(){this.isCurrentState("terminated")||(this.$11("terminated"),this.__worker=null,this.$13(),this.$7=[],this.$8=[],this.$1&&this.$1.remove&&this.$1.remove())};d.terminate=function(){this.isCurrentState("executing")&&this.__worker!=null&&this.__worker.terminate();this.$12();return this};d.execute=function(){this.isCurrentState("terminated")&&g(0,5979);if(["preparing","executing"].some(this.isCurrentState,this))return this;this.$11("preparing");c.prepareResource(this.$4,this.$14.bind(this));return this};d.setAllowCrossPageTransition=function(a){b("gkx")("708253")&&!a&&b("recoverableViolation")("allowAcrossPageTransitions must be true because we dont kill these in Comet.","comet_infra");this.$9=a;return this};d.isCurrentState=function(a){c.states.includes(a)||g(0,5980,a);return a===this.$3};d.$14=function(){this.isCurrentState("executing")&&g(0,5981);if(this.isCurrentState("terminated"))return;this.$4.sameOriginURL||this.$4.source||g(0,19837,this.$4.name);this.$4.sameOriginURL?this.__worker=this.constructWorker(this.$4.sameOriginURL):(this.__worker=this.constructWorker(c.evalWorkerURL),this.getInterfaceableWorker().postMessage(this.$4.source));this.$15("ping",Date.now());if(this.$4.dynamicModules)try{this.$15("defineModules",this.$4.dynamicModules)}catch(a){this.terminate();this.$16("define_error",{message:a.message});throw a}this.$17();this.$11("executing");this.$7.forEach(function(a){return a()});this.$7=[];this.$8.forEach(function(a){return a()});this.$8=[]};d.$13=function(){this.$10.release()};d.$15=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this.getInterfaceableWorker().postMessage({type:a,args:c})};d.$16=function(a,b){c.$16(a,this.$4.name,babelHelpers["extends"]({},b,{cross_page_transition:!!this.$9,state:this.$3}))};c.$18=function(){return Object.keys(b("filterObject")({object_url:c.$19(),eval_url:q(),data_url:c.$20(),worker:c.isSupported(),transferables:c.areTransferablesSupported()},function(a){return!!a}))};d.$17=function(){this.$10.addSubscriptions(b("EventListener").listen(this.getInterfaceableWorker(),"message",this.$21.bind(this)),b("EventListener").listen(this.getInterfaceableWorker(),"error",this.$22.bind(this)))};d.$22=function(a){var b=this.$6(a);!b&&!a.defaultPrevented&&this.$16("exception",{message:a.message})};d.$21=function(b){b=b.data;switch(b.type){case"message":this.$5(b.message);break;case"pong":this.$2=!0;this.$16("executed",{dt:Math.floor(b.args[1]-b.args[0]),bytes:this.$4.source?this.$4.source.length:-1});break;case"terminate":this.terminate();break;case"haste-error":this.terminate();this.$16("haste_error",{message:b.message});break;case"console":var c=b.args.shift();["log","error","info","debug","warn"].includes(c)||g(0,5983,c);a.console[c].apply(a.console,b.args);break}};d.$11=function(a){c.states.includes(a)||g(0,5984,a),this.$16("transition",{next_state:a}),this.$3=a};c.prepareResource=function(d,e){e===void 0&&(e=b("emptyFunction"));d.sameOriginURL||d.url||d.source||g(0,5985);!c.isSupported()&&g(0,5986);if(d.sameOriginURL)e();else if(d.url&&b("areSameOrigin")(new(h||(h=b("URI")))(d.url),new(h||(h=b("URI")))(a.location.href)))d.sameOriginURL=d.url,e();else if(d.source)c.$23()&&(d.sameOriginURL=c.$24(d.source)),e();else if(!d.loading){var f=(i||(i=b("performanceNow")))();d.loading=[e];c.$25(d.url,function(a){a?(d.source=a,c.$23()&&(d.sameOriginURL=c.$24(a)),c.$16("prepared",d.name,{dt:Math.floor((i||(i=b("performanceNow")))()-f),bytes:a.length})):c.$16("failed",d.name,{dt:Math.floor((i||(i=b("performanceNow")))()-f),bytes:0}),d.loading.forEach(function(a){return a()}),d.loading=!1})}else d.loading.push(e);return d};c.releaseResource=function(a){a.sameOriginURL.indexOf("blob:")===0&&(j.revokeObjectURL&&j.revokeObjectURL(a.sameOriginURL),a.sameOriginURL=null);return a};c.isSupported=function(){return p&&(c.$23()||q())};c.isMessageChannelSupported=function(){return c.areTransferablesSupported()&&!!a.MessageChannel};c.areTransferablesSupported=function(){return c.isSupported()&&r()};c.$25=function(a,c){new(b("XHRRequest"))(a).setTransportBuilder(b("getCrossOriginTransport")).setMethod("GET").setResponseHandler(function(a){c(a)}).setErrorHandler(c.bind(null,null)).send()};c.$24=function(a){c.$23()||g(0,5987);if(c.$19()){var d=b("BlobFactory").getBlob([a],{type:"application/javascript"});return j.createObjectURL(d)}if(c.$20())return"data:application/javascript,"+encodeURIComponent(a)};c.$19=function(){return b("BlobFactory").isSupported()&&n()};c.$20=function(){return o()};c.$23=function(){return c.$19()||c.$20()};c.$16=function(a,d,e){if(!b("WebWorkerConfig").logging.enabled)return;b("Bootloader").loadModules(["BanzaiLogger"],function(f){f.log(b("WebWorkerConfig").logging.config,babelHelpers["extends"]({},e,{features_array:c.$18(),event:a,resource:d}))},"WebWorker")};d.constructWorker=function(a){return m(a)};d.$26=function(a,b){if(this.isCurrentState("preparing")){this.$8.push(this.$26.bind(this,a,b));return}this.getInterfaceableWorker().postMessage({type:"port",message:a},b)};d.createMessageChannel=function(a,b){var c=new MessageChannel();this.$26(a,[c.port2].concat(b||[]));c.port1.start();return c.port1};d.getInterfaceableWorker=function(){return this.__worker};return c}();l.states=["constructed","preparing","executing","terminated"];l.evalWorkerURL=b("WebWorkerConfig").evalWorkerURL;function m(b){return new a.Worker(b)}var n=b("memoize")(function(){var a;if(!j||!j.createObjectURL)return!1;try{a=j.createObjectURL(b("BlobFactory").getBlob([""],{type:"application/javascript"}));var c=m(a);c.terminate();c=!0}catch(a){c=!1}finally{j.revokeObjectURL&&j.revokeObjectURL(a)}return c}),o=b("memoize")(function(){try{var a=m("data:application/javascript,");a.terminate();a=!0}catch(b){a=!1}return a}),p=!!a.Worker,q=b("memoize")(function(){try{var a=m(l.evalWorkerURL);a.terminate();a=!0}catch(b){a=!1}return a}),r=b("memoize")(function(){try{var a=m(l.evalWorkerURL),b=new ArrayBuffer(0);a.postMessage({buffer:b},[b]);a.terminate();b=!0}catch(a){b=!1}return b});e.exports=l}),null);